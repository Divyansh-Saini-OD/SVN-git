<?xml version="1.0" encoding="UTF-8" ?>
<?oracle-xsl-mapper
  <!-- SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY. -->
  <mapSources>
    <source type="XSD">
      <schema location="http://L3P4164.na.odcorp.net:9700/orabpel/default/ProcessPO/1.0/BODs/Standalone/ProcessPurchaseOrder.xsd"/>
      <rootElement name="PurchaseOrder" namespace="http://www.openapplications.org/oagis/9"/>
    </source>
  </mapSources>
  <mapTargets>
    <target type="XSD">
      <schema location="PROCESS_PO_007.xsd"/>
      <rootElement name="PROCESS_PO_007" namespace="http://TargetNamespace.com/ServiceName"/>
    </target>
  </mapTargets>
  <!-- GENERATED BY ORACLE XSL MAPPER 10.1.3.1.0(build 061009.0802) AT [MON JAN 29 10:47:45 EST 2007]. -->
?>
<xsl:stylesheet version="1.0"
                xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/"
                xmlns:udt="http://www.openapplications.org/oagis/9/unqualifieddatatypes/1.1"
                xmlns:ns4="http://www.openapplications.org/oagis/9/currencycode/54217:2001"
                xmlns:ehdr="http://www.oracle.com/XSL/Transform/java/oracle.tip.esb.server.headers.ESBHeaderFunctions"
                xmlns:qdt="http://www.openapplications.org/oagis/9/qualifieddatatypes/1.1"
                xmlns:ns2="http://www.openapplications.org/oagis/9/IANAMIMEMediaTypes:2003"
                xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                xmlns:hwf="http://xmlns.oracle.com/bpel/workflow/xpath"
                xmlns:oacl="http://www.openapplications.org/oagis/9/codelists"
                xmlns:nxsd="http://xmlns.oracle.com/pcbpel/nxsd"
                xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:ns1="http://TargetNamespace.com/ServiceName"
                xmlns:ora="http://schemas.oracle.com/xpath/extension"
                xmlns:ids="http://xmlns.oracle.com/bpel/services/IdentityService/xpath"
                xmlns:orcl="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc"
                xmlns:ccts="urn:un:unece:uncefact:documentation:1.1"
                xmlns:ns0="http://www.openapplications.org/oagis/9"
                xmlns:ns3="http://www.openapplications.org/oagis/9/unitcode/66411:2001"
                xmlns:ns5="http://www.openapplications.org/oagis/9/languagecode/5639:1988"
                exclude-result-prefixes="xsl udt ns4 qdt ns2 xsd oacl ccts ns0 ns3 ns5 nxsd ns1 bpws ehdr hwf xp20 ora ids orcl">
  <xsl:template match="/">
 
    <ns1:PurchaseOrder>
      <ns1:PurchaseOrderHeader>
        <ns1:DocumentID>
          <ns1:ID>
            <xsl:value-of select="/ns0:PROCESS_PO_007/ns0:DATAAREA/ns0:PROCESS_PO/ns0:POORDERHDR/ns0:POID"/>
          </ns1:ID>
        </ns1:DocumentID>
        <ns1:LastModificationDateTime>
          <xsl:value-of select="/ns0:PROCESS_PO_007/ns0:DATAAREA/ns0:PROCESS_PO/ns0:POORDERHDR/ns0:DATETIME"/>
        </ns1:LastModificationDateTime>
        <ns1:DocumentDateTime>
          <xsl:value-of select="xp20:current-dateTime()"/>
        </ns1:DocumentDateTime>
        <ns1:Note>
          <xsl:value-of select="/ns0:PROCESS_PO_007/ns0:CNTROLAREA/ns0:SENDER/ns0:REFERENCEID"/>
        </ns1:Note>
        <xsl:for-each select="/ns0:PROCESS_PO_007/ns0:DATAAREA/ns0:PROCESS_PO/ns0:POORDERHDR/ns0:PARTNER">
          <xsl:if test='ns0:PARTNRTYPE = "SoldTo"'>
            <ns1:CustomerParty>
              <ns1:PartyIDs>
                <ns1:ID>
                  <xsl:value-of select="ns0:PARTNRID"/>
                </ns1:ID>
              </ns1:PartyIDs>
              <ns1:Name>
                <xsl:value-of select="ns0:NAME"/>
              </ns1:Name>
              <ns1:Location>
                <ns1:Address>
                  <xsl:for-each select="ns0:ADDRESS/ns0:ADDRLINE">
                    <xsl:if test="@index = 1.0">
                      <ns1:LineOne>
                        <xsl:value-of select="."/>
                      </ns1:LineOne>
                    </xsl:if>
                  </xsl:for-each>
                  <xsl:for-each select="ns0:ADDRESS/ns0:ADDRLINE">
                    <xsl:if test="@index = 2.0">
                      <ns1:LineTwo>
                        <xsl:value-of select="."/>
                      </ns1:LineTwo>
                    </xsl:if>
                  </xsl:for-each>
                  <xsl:for-each select="ns0:ADDRESS/ns0:ADDRLINE">
                    <xsl:if test="@index = 3.0">
                      <ns1:LineThree>
                        <xsl:value-of select="."/>
                      </ns1:LineThree>
                    </xsl:if>
                  </xsl:for-each>
                  <ns1:CityName>
                    <xsl:value-of select="ns0:ADDRESS/ns0:CITY"/>
                  </ns1:CityName>
                  <ns1:CountrySubDivisionCode>
                    <xsl:value-of select="ns0:ADDRESS/ns0:STATEPROVN"/>
                  </ns1:CountrySubDivisionCode>
                  <ns1:CountryCode>
                    <xsl:value-of select="ns0:ADDRESS/ns0:COUNTRY"/>
                  </ns1:CountryCode>
                  <ns1:PostalCode>
                    <xsl:value-of select="ns0:ADDRESS/ns0:POSTALCODE"/>
                  </ns1:PostalCode>
                </ns1:Address>
              </ns1:Location>
              <ns1:Contact>
                <ns1:Name>
                  <xsl:value-of select="ns0:CONTACT/ns0:NAME"/>
                </ns1:Name>
                <ns1:Communication>
                  <ns1:URI>
                    <xsl:value-of select="ns0:CONTACT/ns0:EMAIL"/>
                  </ns1:URI>
                </ns1:Communication>
              </ns1:Contact>
            </ns1:CustomerParty>
          </xsl:if>
        </xsl:for-each>
        <xsl:for-each select="/ns0:PROCESS_PO_007/ns0:DATAAREA/ns0:PROCESS_PO/ns0:POORDERHDR/ns0:PARTNER">
          <xsl:if test='ns0:PARTNRTYPE = "Supplier"'>
            <ns1:SupplierParty>
              <ns1:PartyIDs>
                <ns1:ID>
                  <xsl:value-of select="ns0:PARTNRID"/>
                </ns1:ID>
              </ns1:PartyIDs>
              <ns1:Name>
                <xsl:value-of select="ns0:NAME"/>
              </ns1:Name>
              <ns1:Location>
                <ns1:Address>
                  <xsl:for-each select="ns0:ADDRESS/ns0:ADDRLINE">
                    <xsl:if test="@index = 1">
                      <ns1:LineOne>
                        <xsl:value-of select="."/>
                      </ns1:LineOne>
                    </xsl:if>
                  </xsl:for-each>
                  <xsl:for-each select="ns0:ADDRESS/ns0:ADDRLINE">
                    <xsl:if test="@index = 2">
                      <ns1:LineTwo>
                        <xsl:value-of select="."/>
                      </ns1:LineTwo>
                    </xsl:if>
                  </xsl:for-each>
                  <xsl:for-each select="ns0:ADDRESS/ns0:ADDRLINE">
                    <xsl:if test="@index = 3">
                      <ns1:LineThree>
                        <xsl:value-of select="."/>
                      </ns1:LineThree>
                    </xsl:if>
                  </xsl:for-each>
                  <ns1:CityName>
                    <xsl:value-of select="ns0:ADDRESS/ns0:CITY"/>
                  </ns1:CityName>
                  <ns1:CountrySubDivisionCode>
                    <xsl:value-of select="ns0:ADDRESS/ns0:STATEPROVN"/>
                  </ns1:CountrySubDivisionCode>
                  <ns1:CountryCode>
                    <xsl:value-of select="ns0:ADDRESS/ns0:COUNTRY"/>
                  </ns1:CountryCode>
                  <ns1:PostalCode>
                    <xsl:value-of select="ns0:ADDRESS/ns0:POSTALCODE"/>
                  </ns1:PostalCode>
                </ns1:Address>
              </ns1:Location>
              <ns1:Contact>
                <ns1:Name>
                  <xsl:value-of select="ns0:CONTACT/ns0:NAME"/>
                </ns1:Name>
                <ns1:Communication>
                  <ns1:URI>
                    <xsl:value-of select="ns0:CONTACT/ns0:EMAIL"/>
                  </ns1:URI>
                </ns1:Communication>
              </ns1:Contact>
            </ns1:SupplierParty>
          </xsl:if>
        </xsl:for-each>
        <ns1:TotalAmount>
          <xsl:attribute name="currencyID">
            <xsl:value-of select="/ns0:PROCESS_PO_007/ns0:DATAAREA/ns0:PROCESS_PO/ns0:POORDERHDR/ns0:OPERAMT/ns0:CURRENCY"/>
          </xsl:attribute>
          <xsl:value-of select="concat(/ns0:PROCESS_PO_007/ns0:DATAAREA/ns0:PROCESS_PO/ns0:POORDERHDR/ns0:OPERAMT/ns0:SIGN,/ns0:PROCESS_PO_007/ns0:DATAAREA/ns0:PROCESS_PO/ns0:POORDERHDR/ns0:OPERAMT/ns0:VALUE)"/>
        </ns1:TotalAmount>
        <xsl:for-each select="/ns0:PROCESS_PO_007/ns0:DATAAREA/ns0:PROCESS_PO/ns0:POORDERHDR/ns0:PARTNER">
          <xsl:if test='ns0:PARTNRTYPE = "BillTo"'>
            <ns1:BillToParty>
              <ns1:PartyIDs>
                <ns1:ID>
                  <xsl:value-of select="ns0:PARTNRID"/>
                </ns1:ID>
              </ns1:PartyIDs>
              <ns1:Name>
                <xsl:value-of select="ns0:NAME"/>
              </ns1:Name>
              <ns1:Location>
                <ns1:Address>
                  <xsl:for-each select="ns0:ADDRESS/ns0:ADDRLINE">
                    <xsl:if test="@index = 1">
                      <ns1:LineOne>
                        <xsl:value-of select="."/>
                      </ns1:LineOne>
                    </xsl:if>
                  </xsl:for-each>
                  <xsl:for-each select="ns0:ADDRESS/ns0:ADDRLINE">
                    <xsl:if test="@index = 2">
                      <ns1:LineTwo>
                        <xsl:value-of select="."/>
                      </ns1:LineTwo>
                    </xsl:if>
                  </xsl:for-each>
                  <xsl:for-each select="ns0:ADDRESS/ns0:ADDRLINE">
                    <xsl:if test="@index = 3">
                      <ns1:LineThree>
                        <xsl:value-of select="."/>
                      </ns1:LineThree>
                    </xsl:if>
                  </xsl:for-each>
                  <ns1:CityName>
                    <xsl:value-of select="ns0:ADDRESS/ns0:CITY"/>
                  </ns1:CityName>
                  <ns1:CountrySubDivisionCode>
                    <xsl:value-of select="ns0:ADDRESS/ns0:STATEPROVN"/>
                  </ns1:CountrySubDivisionCode>
                  <ns1:CountryCode>
                    <xsl:value-of select="ns0:ADDRESS/ns0:COUNTRY"/>
                  </ns1:CountryCode>
                  <ns1:PostalCode>
                    <xsl:value-of select="ns0:ADDRESS/ns0:POSTALCODE"/>
                  </ns1:PostalCode>
                </ns1:Address>
              </ns1:Location>
              <ns1:Contact>
                <ns1:Name>
                  <xsl:value-of select="ns0:CONTACT/ns0:NAME"/>
                </ns1:Name>
                <ns1:Communication>
                  <ns1:URI>
                    <xsl:value-of select="ns0:CONTACT/ns0:EMAIL"/>
                  </ns1:URI>
                </ns1:Communication>
              </ns1:Contact>
            </ns1:BillToParty>
          </xsl:if>
        </xsl:for-each>
        <xsl:for-each select="/ns0:PROCESS_PO_007/ns0:DATAAREA/ns0:PROCESS_PO/ns0:POORDERHDR/ns0:PARTNER">
          <xsl:if test='ns0:PARTNRTYPE = "Carrier"'>
            <ns1:CarrierParty>
              <ns1:Name>
                <xsl:value-of select="ns0:NAME"/>
              </ns1:Name>
              <ns1:Location>
                <ns1:Address>
                  <xsl:for-each select="ns0:ADDRESS/ns0:ADDRLINE">
                    <xsl:if test="@index = 1">
                      <ns1:LineOne>
                        <xsl:value-of select="."/>
                      </ns1:LineOne>
                    </xsl:if>
                  </xsl:for-each>
                  <xsl:for-each select="ns0:ADDRESS/ns0:ADDRLINE">
                    <xsl:if test="@index = 2">
                      <ns1:LineTwo>
                        <xsl:value-of select="."/>
                      </ns1:LineTwo>
                    </xsl:if>
                  </xsl:for-each>
                  <xsl:for-each select="ns0:ADDRESS/ns0:ADDRLINE">
                    <xsl:if test="@index = 3">
                      <ns1:LineThree>
                        <xsl:value-of select="."/>
                      </ns1:LineThree>
                    </xsl:if>
                  </xsl:for-each>
                </ns1:Address>
              </ns1:Location>
            </ns1:CarrierParty>
          </xsl:if>
        </xsl:for-each>
      </ns1:PurchaseOrderHeader>
      <xsl:for-each select="/ns0:PROCESS_PO_007/ns0:DATAAREA/ns0:PROCESS_PO/ns0:POORDERLIN">
        <ns1:PurchaseOrderLine>
          <ns1:LineNumber>
            <xsl:value-of select="ns0:POLINENUM"/>
          </ns1:LineNumber>
          <ns1:Item>
            <ns1:ItemID>
              <ns1:ID>
                <xsl:value-of select="ns0:ITEM"/>
              </ns1:ID>
            </ns1:ItemID>
            <ns1:Classification>
              <ns1:Description>
                <xsl:value-of select="ns0:DESCRIPTN"/>
              </ns1:Description>
            </ns1:Classification>
          </ns1:Item>
          <ns1:Quantity>
            <xsl:attribute name="unitCode">
              <xsl:value-of select="ns0:QUANTITY/ns0:UOM"/>
            </xsl:attribute>
            <xsl:value-of select="concat(ns0:QUANTITY/ns0:SIGN,ns0:QUANTITY/ns0:VALUE)"/>
          </ns1:Quantity>
          <ns1:UnitPrice>
            <ns1:Amount>
              <xsl:attribute name="currencyID">
                <xsl:value-of select="ns0:OPERAMT/ns0:CURRENCY"/>
              </xsl:attribute>
              <xsl:value-of select="concat(ns0:OPERAMT/ns0:SIGN,ns0:OPERAMT/ns0:VALUE)"/>
            </ns1:Amount>
            <ns1:PerQuantity>
              <xsl:attribute name="unitCode">
                <xsl:value-of select="ns0:OPERAMT/ns0:UOM"/>
              </xsl:attribute>
              <xsl:value-of select="ns0:OPERAMT/ns0:UOMVALUE"/>
            </ns1:PerQuantity>
          </ns1:UnitPrice>
        </ns1:PurchaseOrderLine>
      </xsl:for-each>
    </ns1:PurchaseOrder>
  </xsl:template>
</xsl:stylesheet>
