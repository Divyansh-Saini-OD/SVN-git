<?xml version="1.0" encoding="windows-1252" ?>
<!DOCTYPE ViewObject SYSTEM "jbo_03_01.dtd">
<!---->
<ViewObject
  xmlns="http://xmlns.oracle.com/bc4j"
  Name="VAInvoiceSumTotalVO"
  Version="12.2.1.12.24"
  InheritPersonalization="merge"
  BindingStyle="OracleName"
  CustomQuery="true"
  RowClass="od.tdmatch.model.VAInvoiceSumTotalVORowImpl"
  ComponentClass="od.tdmatch.model.VAInvoiceSumTotalVOImpl"
  PageIterMode="Full">
  <DesignTime>
    <Attr Name="_codeGenFlag2" Value="Coll"/>
    <Attr Name="_isExpertMode" Value="true"/>
    <Attr Name="_isCodegen" Value="true"/>
  </DesignTime>
  <Properties>
    <SchemaBasedProperties>
      <LABEL
        ResId="od.tdmatch.model.VAInvoiceSumTotalVO_LABEL"/>
    </SchemaBasedProperties>
  </Properties>
  <SQLQuery><![CDATA[select sum(total_inv_count)  sum_tot_inv_count                 
, sum(total_inv_amount)  sum_tot_inv_amt                 
,sum(total_line_amount)  sum_tot_line_amt                 
,sum(total_moot_count)  sum_moot_count                 
,sum(total_moot_inv_amount)  sum_tot_moot_inv_amt                 
,sum(total_moot_line_amount)  sum_tot_moot_line_amt                 
,sum(total_nrf_count)  sum_tot_nrf_count                 
,sum(total_nrf_amount)  sum_tot_nrf_amt                
from (SELECT target_value2 vendor_assistant,             
  SUM(DECODE(hold_type,'TOTAL',inv_count,0)) total_inv_count,             
  SUM(DECODE(hold_type,'TOTAL',inv_amount,0)) total_inv_amount,             
  SUM(DECODE(hold_type,'MOOT',line_total,0))+SUM(DECODE(hold_type,'NRF',inv_amount,0)) total_line_amount,             
  SUM(DECODE(hold_type,'MOOT',inv_count,0)) total_moot_count,             
  SUM(DECODE(hold_type,'MOOT',inv_amount,null)) total_moot_inv_amount,             
  SUM(DECODE(hold_type,'MOOT',line_total,0)) total_moot_line_amount,             
  SUM(DECODE(hold_type,'NRF',inv_count,0)) total_nrf_count,             
  SUM(DECODE(hold_type,'NRF',inv_amount,0)) total_nrf_amount             
FROM             
  (SELECT tv.target_value2,   
          a.invoice_id,           
          'TOTAL' hold_type,           
          a.invoice_amount inv_amount,           
          0 line_total ,           
          1 inv_count           
    FROM  xx_fin_translatevalues tv  
         ,xx_fin_translatedefinition td  
         ,ap_supplier_sites_all site  
         ,ap_invoices_all a          
   WHERE 1=1               
     AND td.TRANSLATION_NAME = 'XX_AP_VENDOR_ASSISTANTS'   
     AND tv.TRANSLATE_ID  = td.TRANSLATE_ID  
     AND tv.enabled_flag='Y'  
     AND SYSDATE BETWEEN tv.start_date_active and NVL(tv.end_date_active,sysdate)  
     AND a.invoice_id in (151613535, 151613536, 151593535, 151593536, 151653536)--(151593535,151593536)  --in (151613535, 151613536, 151593535, 151593536, 151653536)                
     AND site.vendor_id = a.vendor_id           
     AND site.vendor_site_id = a.vendor_site_id           
	 /*AND site.attribute8 like 'TR%'	 */  
     AND tv.target_value1=site.attribute6||''  
     AND EXISTS (select 'x'           
                   from ap_payment_schedules_all apsa           
                  where apsa.invoice_id=a.invoice_id           
                    AND NVL(apsa.discount_date,due_date) BETWEEN (sysdate-30) AND (sysdate+30)           
			    )    
     AND exists (select 'x'            
                  from apps.ap_holds_all  
                 where invoice_id = a.invoice_id                                                                                   
                )     
     AND EXISTS (SELECT 'x'  
                   FROM xx_fin_translatevalues tv  
                       ,xx_fin_translatedefinition td  
                  WHERE td.TRANSLATION_NAME = 'XX_AP_TR_MATCH_INVOICES'  
                    AND tv.TRANSLATE_ID  = td.TRANSLATE_ID  
                    AND tv.enabled_flag='Y'  
                    AND SYSDATE BETWEEN tv.start_date_active and NVL(tv.end_date_active,sysdate)  
                    AND tv.target_value1=a.source  
                )			     
  UNION           
  SELECT target_value2, invoice_id, hold_type, inv_amount, line_total, inv_count           
   FROM (SELECT  tv.target_value2,           
				a.invoice_id,           
				l.line_number,           
				'MOOT' hold_type,           
				a.invoice_amount inv_amount,           
				l.amount line_total,           
				1 inv_count,           
				count(1) line_count           
          FROM  xx_fin_translatevalues tv  
               ,xx_fin_translatedefinition td  
               ,ap_supplier_sites_all site           
		       ,ap_invoice_lines_all l  
               ,ap_invoices_all a           
	     WHERE 1=1               
           AND td.TRANSLATION_NAME = 'XX_AP_VENDOR_ASSISTANTS'   
           AND tv.TRANSLATE_ID  = td.TRANSLATE_ID  
           AND tv.enabled_flag='Y'  
           AND SYSDATE BETWEEN tv.start_date_active and NVL(tv.end_date_active,sysdate)  
           AND a.invoice_id in (151613535, 151613536, 151593535, 151593536, 151653536)--(151593535,151593536)  --in (151613535, 151613536, 151593535, 151593536, 151653536)                
           AND site.vendor_id = a.vendor_id           
           AND site.vendor_site_id = a.vendor_site_id           
	       /*AND site.attribute8 like 'TR%'	*/	   		     
           AND tv.target_value1=site.attribute6||''  
		   AND l.invoice_id=a.invoice_id           
		   AND l.line_type_lookup_code='ITEM'           
		   AND EXISTS (SELECT 'x'           
                         from ap_payment_schedules_all apsa           
                        where apsa.invoice_id=a.invoice_id           
                          AND NVL(apsa.discount_date,due_date) BETWEEN sysdate-30 AND sysdate+30)           
		   AND EXISTS (SELECT 'x'            
                         FROM ap_holds_all aha  
						where aha.invoice_id = a.invoice_id           
                          AND aha.line_Location_id = l.po_line_location_id           
                          AND aha.hold_lookup_code != 'OD NO Receipt'            
                       )           
           AND NOT EXISTS (select 'x'            
                             from ap_holds_all aha           
                            where aha.invoice_id = a.invoice_id           
                              AND aha.hold_lookup_code = 'OD NO Receipt'            
                           )     
           AND EXISTS (SELECT 'x'  
                         FROM xx_fin_translatevalues tv  
                             ,xx_fin_translatedefinition td  
                        WHERE td.TRANSLATION_NAME = 'XX_AP_TR_MATCH_INVOICES'  
                          AND tv.TRANSLATE_ID  = td.TRANSLATE_ID  
                          AND tv.enabled_flag='Y'  
                          AND SYSDATE BETWEEN tv.start_date_active and NVL(tv.end_date_active,sysdate)  
                          AND tv.target_value1=a.source  
                      )			     
         GROUP BY tv.target_value2,           
				  a.invoice_id,           
                  l.line_number,           
                  a.invoice_amount,           
                  l.amount  
		)           
  UNION           
  SELECT tv.target_value2,            
         a.invoice_id,           
         'NRF' hold_type,           
         a.invoice_amount inv_amount,           
         0 line_total,           
         1 inv_count           
    FROM  xx_fin_translatevalues tv  
         ,xx_fin_translatedefinition td  
         ,ap_supplier_sites_all site                   
         ,ap_invoices_all a         
   WHERE 1=1   
     AND td.TRANSLATION_NAME = 'XX_AP_VENDOR_ASSISTANTS'   
     AND tv.TRANSLATE_ID  = td.TRANSLATE_ID  
     AND tv.enabled_flag='Y'  
     AND SYSDATE BETWEEN tv.start_date_active and NVL(tv.end_date_active,sysdate)  
     AND a.invoice_id in (151613535, 151613536, 151593535, 151593536, 151653536)--(151593535,151593536)  --in (151613535, 151613536, 151593535, 151593536, 151653536)                
     AND site.vendor_id = a.vendor_id           
     AND site.vendor_site_id = a.vendor_site_id      
	 /*AND site.attribute8 like 'TR%'*/  
     AND tv.target_value1=site.attribute6||''    
     AND EXISTS (select 'x'           
                   from ap_payment_schedules_all apsa           
                  where apsa.invoice_id=a.invoice_id           
                    AND NVL(apsa.discount_date,due_date) BETWEEN (sysdate-30) AND (sysdate+30)           
			    )    
     AND EXISTS (SELECT 'x'  
                   FROM xx_fin_translatevalues tv  
                       ,xx_fin_translatedefinition td  
                  WHERE td.TRANSLATION_NAME = 'XX_AP_TR_MATCH_INVOICES'  
                    AND tv.TRANSLATE_ID  = td.TRANSLATE_ID  
                    AND tv.enabled_flag='Y'  
                    AND SYSDATE BETWEEN tv.start_date_active and NVL(tv.end_date_active,sysdate)  
                    AND tv.target_value1=a.source  
                )			     
    AND exists (select 'x'            
                  from apps.ap_holds_all  
                 where invoice_id = a.invoice_id                                                                                   
				   AND hold_lookup_code = 'OD NO Receipt'  
                )     
 )             
GROUP BY target_value2)]]></SQLQuery>
  <ViewAttribute
    Name="SumTotInvCount"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="SUM_TOT_INV_COUNT"
    Expression="SUM_TOT_INV_COUNT"
    SQLType="NUMERIC">
    <Properties>
      <SchemaBasedProperties>
        <FMT_FORMAT
          ResId="od.tdmatch.model.VAInvoiceSumTotalVO.SumTotInvCount_FMT_FORMAT"/>
        <FMT_FORMATTER
          ResId="od.tdmatch.model.VAInvoiceSumTotalVO.SumTotInvCount_FMT_FORMATTER"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="SumTotInvAmt"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="SUM_TOT_INV_AMT"
    Expression="SUM_TOT_INV_AMT"
    SQLType="NUMERIC">
    <Properties>
      <SchemaBasedProperties>
        <FMT_FORMAT
          ResId="od.tdmatch.model.VAInvoiceSumTotalVO.SumTotInvAmt_FMT_FORMAT"/>
        <FMT_FORMATTER
          ResId="od.tdmatch.model.VAInvoiceSumTotalVO.SumTotInvAmt_FMT_FORMATTER"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="SumTotLineAmt"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="SUM_TOT_LINE_AMT"
    Expression="SUM_TOT_LINE_AMT"
    SQLType="NUMERIC">
    <Properties>
      <SchemaBasedProperties>
        <FMT_FORMAT
          ResId="od.tdmatch.model.VAInvoiceSumTotalVO.SumTotLineAmt_FMT_FORMAT"/>
        <FMT_FORMATTER
          ResId="od.tdmatch.model.VAInvoiceSumTotalVO.SumTotLineAmt_FMT_FORMATTER"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="SumMootCount"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="SUM_MOOT_COUNT"
    Expression="SUM_MOOT_COUNT"
    SQLType="NUMERIC">
    <Properties>
      <SchemaBasedProperties>
        <FMT_FORMAT
          ResId="od.tdmatch.model.VAInvoiceSumTotalVO.SumMootCount_FMT_FORMAT"/>
        <FMT_FORMATTER
          ResId="od.tdmatch.model.VAInvoiceSumTotalVO.SumMootCount_FMT_FORMATTER"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="SumTotMootInvAmt"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="SUM_TOT_MOOT_INV_AMT"
    Expression="SUM_TOT_MOOT_INV_AMT"
    SQLType="NUMERIC">
    <Properties>
      <SchemaBasedProperties>
        <FMT_FORMAT
          ResId="od.tdmatch.model.VAInvoiceSumTotalVO.SumTotMootInvAmt_FMT_FORMAT"/>
        <FMT_FORMATTER
          ResId="od.tdmatch.model.VAInvoiceSumTotalVO.SumTotMootInvAmt_FMT_FORMATTER"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="SumTotMootLineAmt"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="SUM_TOT_MOOT_LINE_AMT"
    Expression="SUM_TOT_MOOT_LINE_AMT"
    SQLType="NUMERIC">
    <Properties>
      <SchemaBasedProperties>
        <FMT_FORMAT
          ResId="od.tdmatch.model.VAInvoiceSumTotalVO.SumTotMootLineAmt_FMT_FORMAT"/>
        <FMT_FORMATTER
          ResId="od.tdmatch.model.VAInvoiceSumTotalVO.SumTotMootLineAmt_FMT_FORMATTER"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="SumTotNrfCount"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="SUM_TOT_NRF_COUNT"
    Expression="SUM_TOT_NRF_COUNT"
    SQLType="NUMERIC">
    <Properties>
      <SchemaBasedProperties>
        <FMT_FORMAT
          ResId="od.tdmatch.model.VAInvoiceSumTotalVO.SumTotNrfCount_FMT_FORMAT"/>
        <FMT_FORMATTER
          ResId="od.tdmatch.model.VAInvoiceSumTotalVO.SumTotNrfCount_FMT_FORMATTER"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="SumTotNrfAmt"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="SUM_TOT_NRF_AMT"
    Expression="SUM_TOT_NRF_AMT"
    SQLType="NUMERIC">
    <Properties>
      <SchemaBasedProperties>
        <FMT_FORMAT
          ResId="od.tdmatch.model.VAInvoiceSumTotalVO.SumTotNrfAmt_FMT_FORMAT"/>
        <FMT_FORMATTER
          ResId="od.tdmatch.model.VAInvoiceSumTotalVO.SumTotNrfAmt_FMT_FORMATTER"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ResourceBundle>
    <PropertiesBundle
      PropertiesFile="od.tdmatch.model.ModelBundle"/>
  </ResourceBundle>
</ViewObject>
