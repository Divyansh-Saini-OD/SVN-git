<?xml version="1.0" encoding='WINDOWS-1252'?>
<!DOCTYPE ViewObject SYSTEM "jbo_03_01.dtd">

<!-- $Header: ODTotalUnappliedPaymentsVO.xml 120.1 2007/03/16 09:58:04 smohan noship $ -->
<!--
  Author: Sreedhar Mohan
  Component Id: E1327 and E2052
  Script Location: $CUSTOM_JAVA_TOP/od/oracle/apps/xxfin/ar/irec/accountDetails/server
  Description: Custom Code to improve the performance of TotalUnappliedPaymentsVO
  History:
  Name            Date         Version    Description
  Sreedhar Mohan 14-May-2014   1.0    Retrofitted for R12 Upgrade.
-->
<ViewObject
   Name="ODTotalUnappliedPaymentsVO"
   Extends="oracle.apps.ar.irec.accountDetails.server.TotalUnappliedPaymentsVO"
   BindingStyle="Oracle"
   CustomQuery="true"
   RowClass="od.oracle.apps.xxfin.ar.irec.accountDetails.server.ODTotalUnappliedPaymentsVORowImpl"   
   ComponentClass="od.oracle.apps.xxfin.ar.irec.accountDetails.server.ODTotalUnappliedPaymentsVOImpl"
   UseGlueCode="false" >
   <SQLQuery><![CDATA[
SELECT /*+ index(ps XX_AR_PAYMENT_SCHEDULES_ALL_N5) */ NVL(SUM(-app.amount_applied), 0) AS Total_Unapplied_Payments
FROM AR_PAYMENT_SCHEDULES ps,
  ar_receivable_applications app,
  ra_customer_trx ct
WHERE ps.customer_id                                          = :1
AND DECODE( (:2), NULL, NVL(ps.customer_site_use_id,-10), :3) = NVL(ps.customer_site_use_id,-10)
AND ps.invoice_currency_code                                  = :4
AND app.cash_receipt_id                                       = ps.cash_receipt_id
AND NVL( app.confirmed_flag, 'Y' )                            = 'Y'
AND app.status                                                = 'UNAPP'
AND ps.status                                                 = 'OP'
AND ps.customer_trx_id                                        = ct.customer_trx_id(+)
AND(TRUNC(ps.trx_date))                                      >= TRUNC(DECODE( NVL(FND_PROFILE.VALUE('ARI_FILTER_TRXDATE_OLDER'), 0), 0, ps.trx_date, (sysdate-FND_PROFILE.VALUE('ARI_FILTER_TRXDATE_OLDER'))))
   ]]></SQLQuery>
   <DesignTime>
      <Attr Name="_isCodegen" Value="true" />
      <Attr Name="_version" Value="5.0.0.6.85" />
      <Attr Name="_CodeGenFlagNew" Value="36" />
   </DesignTime>
   <ViewAttribute
      Name="TotalUnappliedPayments"
      IsQueriable="false"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      Expression="TOTAL_UNAPPLIED_PAYMENTS"
      SQLType="NUMERIC"
      AliasName="TOTAL_UNAPPLIED_PAYMENTS" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="0" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="CurrencyCode"
      IsQueriable="false"
      IsPersistent="false"
      Type="java.lang.String"
      AliasName="CURRENCY_CODE" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="0" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="SumAmountFormatted"
      IsQueriable="false"
      IsPersistent="false"
      Type="java.lang.String"
      AliasName="SUM_AMOUNT_FORMATTED" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="0" />
      </DesignTime>
   </ViewAttribute>
</ViewObject>
