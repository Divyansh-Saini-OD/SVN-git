package od.oracle.apps.xxcrm.asn.opportunity.lov.server;
import oracle.apps.asn.opportunity.lov.server.OpportunityNameNumberVOImpl;
import com.sun.java.util.collections.ArrayList;
import java.util.Vector;
import oracle.apps.asn.common.fwk.server.ASNViewObjectImpl;
import oracle.apps.asn.common.schema.server.ASNUtil;
import oracle.apps.fnd.common.MessageToken;
import oracle.apps.fnd.common.VersionInfo;
import oracle.apps.fnd.framework.server.*;
import oracle.jbo.server.ViewObjectImpl;

//  ---------------------------------------------------------------
//  ---    File generated by Oracle Business Components for Java.
//  ---------------------------------------------------------------

public class ODOpportunityNameNumberVOImpl extends OpportunityNameNumberVOImpl 
{
  /**
   * 
   * This is the default constructor (do not remove)
   */
  public ODOpportunityNameNumberVOImpl()
  {
  }

    public void initQuery(String s, String s1, ArrayList arraylist, String s2)
    {
/*
        StringBuffer stringbuffer = new StringBuffer(150);
        Vector vector = new Vector(4);
        int i = 0;
        setWhereClauseParams(null);
        setWhereClause(null);
        String s3 = null;
        OAApplicationModuleImpl oaapplicationmoduleimpl = (OAApplicationModuleImpl)getApplicationModule();
        OADBTransactionImpl oadbtransactionimpl = (OADBTransactionImpl)oaapplicationmoduleimpl.getOADBTransaction();
        s3 = oadbtransactionimpl.getProfile("ASN_OPP_ACCESS");
        if(s3 == null || "".equals(s3.trim()))
            s3 = "T";
        if("T".equals(s3))
        {
            oracle.jbo.domain.Number number = null;
            if(s != null && !"".equals(s.trim()))
            {
                MessageToken amessagetoken[] = {
                    new MessageToken("IDNAME", s)
                };
                number = ASNUtil.stringToJboNumber(s, "ASN_CMMN_STR_TO_JBONUM_ERR", amessagetoken);
            }
            if(s1 != null && s1.equals("Y") && arraylist != null)
            {
                stringbuffer.append(" leadid in ");
                stringbuffer.append(" (SELECT  lead_id from ");
// old query -> stringbuffer.append(" (SELECT  secu.lead_id FROM as_accesses_all secu                 WHERE                                    secu.sales_group_id in (SELECT   b.group_id FROM jtf_rs_groups_denorm b, jtf_rs_group_usages  jrgu WHERE  trunc(b.start_date_active) <= TRUNC(SYSDATE) AND  trunc(NVL(b.end_date_active, SYSDATE)) >= TRUNC(SYSDATE) AND     jrgu.group_id = b.group_id AND   b.parent_group_id in (");
                stringbuffer.append(" (SELECT  secu.entity_id FROM XX_TM_NAM_TERR_CURR_ASSIGN_V secu WHERE secu.entity_type ='OPPORTUNITY' AND secu.group_id in (SELECT   b.group_id FROM jtf_rs_groups_denorm b, jtf_rs_group_usages  jrgu WHERE  trunc(b.start_date_active) <= TRUNC(SYSDATE) AND  trunc(NVL(b.end_date_active, SYSDATE)) >= TRUNC(SYSDATE) AND     jrgu.group_id = b.group_id AND   b.parent_group_id in (");
                for(int j = 0; j < arraylist.size(); j++)
                {
                    stringbuffer.append(":" + i++);
                    stringbuffer.append(",");
                    vector.addElement(arraylist.get(j));
                }

                if(stringbuffer.toString().endsWith(","))
                {
                    stringbuffer.setLength(stringbuffer.length() - 1);
                    stringbuffer.append(") ");
                }
                stringbuffer.append(" ) ");
                if(s2 != null && s2.equals("Y"))
                {
// old query ->     stringbuffer.append(" UNION ALL SELECT aaa.lead_id FROM as_accesses_all aaa WHERE aaa.sales_lead_id is  null AND aaa.lead_id is NOT null AND aaa.salesforce_id = ");
                    stringbuffer.append(" UNION ALL SELECT secu.entity_id FROM XX_TM_NAM_TERR_CURR_ASSIGN_V secu WHERE secu.entity_type ='OPPORTUNITY' AND secu.resource_id = ");
                    stringbuffer.append(":" + i++);
                    vector.addElement(number);
//                    stringbuffer.append(" AND   aaa.salesforce_id + 0 = ");
//                    stringbuffer.append(":" + i++);
//                    vector.addElement(number);
                }
                stringbuffer.append(")) ");
            } else
            {
                stringbuffer.append(" leadid in ");

/ old query
                stringbuffer.append(" (SELECT  lead_id ");
                stringbuffer.append("  FROM    as_accesses_all aaa ");
                stringbuffer.append(" WHERE aaa.sales_lead_id is  null ");
                stringbuffer.append(" AND aaa.lead_id is NOT null ");
                stringbuffer.append(" AND aaa.salesforce_id = ");
/
                stringbuffer.append(" (SELECT  aaa.entity_id lead_id ");
                stringbuffer.append("  FROM    XX_TM_NAM_TERR_CURR_ASSIGN_V aaa ");
                stringbuffer.append(" WHERE aaa.entity_type = 'OPPORTUNITY' ");
                stringbuffer.append(" AND aaa.resource_id = ");

                stringbuffer.append(":" + i++);
                vector.addElement(number);
//                stringbuffer.append(" AND   aaa.salesforce_id + 0 = ");
//                stringbuffer.append(":" + i++);
//                vector.addElement(number);
                stringbuffer.append(") ");
            }
            setWhereClause(stringbuffer.toString());
            if(i > 0)
            {
                Object aobj[] = new Object[i];
                vector.copyInto(aobj);
                setWhereClauseParams(aobj);
            }
        }
*/
        setPreparedForExecution(true);
    }

}