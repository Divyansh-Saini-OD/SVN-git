package od.oracle.apps.xxcrm.errorhandler.server;
import oracle.apps.fnd.framework.server.OAApplicationModuleImpl;
import oracle.apps.fnd.framework.OAException;
import oracle.apps.fnd.common.MessageToken;

//  ---------------------------------------------------------------
//  ---    File generated by Oracle Business Components for Java.
//  ---------------------------------------------------------------

public class ErrorDetailsAMImpl extends OAApplicationModuleImpl 
{
  /**
   * 
   * This is the default constructor (do not remove)
   */
  public ErrorDetailsAMImpl()
  {
  }


  /**
   * 
   * Sample main for debugging Business Components code using the tester.
   */
  public static void main(String[] args)
  {
    launchTester("od.oracle.apps.xxcrm.errorhandler.server", "ErrorDetailsAMLocal");
  }

  /**
   * 
   * Container's getter for ErrorResolutionVO1
   */
  public ErrorResolutionVOImpl getErrorResolutionVO1()
  {
    return (ErrorResolutionVOImpl)findViewObject("ErrorResolutionVO1");
  }
  
/*********************************************************************
********
* Initializes the resolution query.
**********************************************************************
*******
*/
  public void initDetails(String messageName)
  {
    ErrorResolutionVOImpl vo = getErrorResolutionVO1();
    if (vo == null)
    {
      MessageToken[] errTokens = { new MessageToken("OBJECT_NAME", "ErrorResolutionVO1")};
      throw new OAException("AK", "FWK_TBX_OBJECT_NOT_FOUND", errTokens);
    }
    vo.initQuery(messageName);
  } // end initDetails()

  /**
   * 
   * Container's getter for ErrorDetailsVO1
   */
  public ErrorDetailsVOImpl getErrorDetailsVO1()
  {
    return (ErrorDetailsVOImpl)findViewObject("ErrorDetailsVO1");
  }
  public void buildQuery(String moduleName, String programType, String toDate, String fromDate)
  {
    String wc = " 1=1 ";

  	if (!moduleName.equals(""))
    {
	    wc = wc + " AND MODULE_NAME LIKE '" + moduleName + "' ";
    }
	  if (!programType.equals(""))
    {
	    wc = wc + " AND PROGRAM_TYPE LIKE '" + programType + "' ";
	  }
  	if (!toDate.equals("") && !fromDate.equals("")){
	  wc = wc + " AND trunc(CREATION_DATE) BETWEEN '" + toDate + "' AND '"+ fromDate + "' ";
	}

    ErrorDetailsVOImpl vo = getErrorDetailsVO1();
//    vo.clearCache();

    vo.initBigQuery(wc);

  }


}