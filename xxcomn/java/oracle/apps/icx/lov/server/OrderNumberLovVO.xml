<?xml version='1.0' encoding='windows-1252' ?>
<!-- +======================================================================+ -->
<!-- |    Copyright (c) 2005, 2014 Oracle and/or its affiliates.           | -->
<!-- |                         All rights reserved.                         | -->
<!-- |                           Version 12.0.0                             | -->
<!-- +======================================================================+ -->
<!-- | Madhu Bolli  1.1   12-May-2015  Retrofit from punchout patch 19602627 | -->
<!-- | Madhu Bolli  1.2   09-Aug-2016  Retrofit for 12.2.5 Upgrade(from 12.1.3)| -->
<!-- |                                 above the version 120.13.12020000.4     | -->
<!DOCTYPE ViewObject SYSTEM "jbo_03_01.dtd">

<!-- $Header: OrderNumberLovVO.xml 120.13.12020000.4 2014/05/19 10:00:57 beyi ship $ -->

<ViewObject
   Name="OrderNumberLovVO"
   BindingStyle="Oracle"
   CustomQuery="true"
   RowClass="oracle.apps.icx.lov.server.OrderNumberLovVORowImpl"
   ComponentClass="oracle.apps.icx.lov.server.OrderNumberLovVOImpl"
   FetchMode="FETCH_AS_NEEDED"
   UseGlueCode="false" >
   <SQLQuery><![CDATA[
SELECT PDT.TYPE_NAME ORDER_TYPE,
       'PO' ORDER_TYPE_CODE,
       POH.PO_HEADER_ID ORDER_ID,
       TO_CHAR(POH.CLM_DOCUMENT_NUMBER) PO_NUMBER,
       To_Number(NULL) RELEASE_NUM,
       TO_CHAR(POH.CLM_DOCUMENT_NUMBER) PO_NUM_REL_NUM, 
       POV.VENDOR_NAME SOURCE,
       PVS.VENDOR_SITE_CODE SUPPLIER_SITE,
       OOD.NAME OPERATING_UNIT
FROM   PO_HEADERS_ALL_SEC POH,
       PO_VENDORS POV,
       PO_VENDOR_SITES_ALL PVS,
       PO_DOCUMENT_TYPES_ALL PDT,
       HR_ALL_ORGANIZATION_UNITS_TL OOD
WHERE  POH.VENDOR_ID = POV.VENDOR_ID(+)
       AND POH.VENDOR_SITE_ID = PVS.VENDOR_SITE_ID(+)
       AND POH.ORG_ID = PVS.ORG_ID(+)
       AND POH.ORG_ID = OOD.ORGANIZATION_ID
       AND OOD.LANGUAGE = USERENV('LANG')
       AND PDT.DOCUMENT_TYPE_CODE = 'PO'
       AND PDT.DOCUMENT_SUBTYPE = POH.TYPE_LOOKUP_CODE
       AND PDT.ORG_ID = POH.ORG_ID
       AND (POH.clm_document_number LIKE :1)
       AND (EXISTS (SELECT 'PO in OU'
                    FROM   PO_DISTRIBUTIONS POD
                    WHERE  POD.PO_HEADER_ID = POH.PO_HEADER_ID)
             OR EXISTS (SELECT 'PO with Req in OU'
                        FROM   PO_REQ_DISTRIBUTIONS PRD,
                               PO_DISTRIBUTIONS_ALL POD
                        WHERE  POD.PO_HEADER_ID = POH.PO_HEADER_ID
                               AND POD.REQ_DISTRIBUTION_ID = PRD.DISTRIBUTION_ID))
UNION ALL
SELECT PDT.TYPE_NAME ORDER_TYPE,
       'RELEASE' ORDER_TYPE_CODE,
       NVL(POR.PO_RELEASE_ID,POH.PO_HEADER_ID) ORDER_ID,
       TO_CHAR(POH.CLM_DOCUMENT_NUMBER) PO_NUMBER,
       To_Number(POR.RELEASE_NUM) RELEASE_NUM,
       TO_CHAR(POH.CLM_DOCUMENT_NUMBER || '-' || POR.RELEASE_NUM) PO_NUM_REL_NUM,
       POV.VENDOR_NAME SOURCE,
       PVS.VENDOR_SITE_CODE SUPPLIER_SITE,
       OOD.NAME OPERATING_UNIT
FROM   PO_HEADERS_ALL_SEC POH,
       PO_RELEASES_ALL POR,
       PO_VENDORS POV,
       PO_VENDOR_SITES_ALL PVS,
       PO_DOCUMENT_TYPES_ALL PDT,
       HR_ALL_ORGANIZATION_UNITS_TL OOD
WHERE  POH.PO_HEADER_ID = POR.PO_HEADER_ID (+)
       AND POH.VENDOR_ID = POV.VENDOR_ID
       AND POH.VENDOR_SITE_ID = PVS.VENDOR_SITE_ID
       AND POH.ORG_ID = PVS.ORG_ID
       AND POH.ORG_ID = OOD.ORGANIZATION_ID
       AND OOD.LANGUAGE = USERENV('LANG')
       AND PDT.DOCUMENT_TYPE_CODE = 'RELEASE'
       AND PDT.DOCUMENT_SUBTYPE = POR.RELEASE_TYPE
       AND PDT.ORG_ID = POH.ORG_ID
       AND (POH.clm_document_number like :2 AND POR.RELEASE_NUM like :3)
       AND (EXISTS (SELECT 'Release in OU'
                    FROM   PO_DISTRIBUTIONS POD
                    WHERE  POD.PO_HEADER_ID = POH.PO_HEADER_ID)
             OR EXISTS (SELECT 'Release with Req in OU'
                        FROM   PO_REQ_DISTRIBUTIONS PRD,
                               PO_DISTRIBUTIONS_ALL POD
                        WHERE  POD.PO_HEADER_ID = POH.PO_HEADER_ID
                               AND POD.PO_RELEASE_ID = POR.PO_RELEASE_ID
                               AND POD.REQ_DISTRIBUTION_ID = PRD.DISTRIBUTION_ID))
UNION ALL
SELECT DISTINCT (SELECT LOOKUP.MEANING
                 FROM   FND_LOOKUP_VALUES_VL LOOKUP
                 WHERE  LOOKUP.LOOKUP_CODE = 'REQ'
                        AND LOOKUP.LOOKUP_TYPE = 'POR_RCV_ORDER_TYPE') ORDER_TYPE,
                'REQ' ORDER_TYPE_CODE,
                OSH.HEADER_ID ORDER_ID,
                TO_CHAR(OSH.ORDER_NUMBER) PO_NUMBER,
                TO_NUMBER(NULL) RELEASE_NUM,
                TO_CHAR(OSH.ORDER_NUMBER) PO_NUM_REL_NUM,
                OOG.NAME SOURCE,
                NULL SUPPLIER_SITE,
                OOD.NAME OPERATING_UNIT
FROM   HR_ALL_ORGANIZATION_UNITS_TL OOD,
       HR_ALL_ORGANIZATION_UNITS_TL OOG,
       PO_REQUISITION_HEADERS_CLM_V PORH,
       PO_REQUISITION_LINES PORL,
       OE_ORDER_HEADERS_ALL OSH,
       PO_SYSTEM_PARAMETERS POSP
WHERE  OSH.ORDER_SOURCE_ID = POSP.ORDER_SOURCE_ID
       AND OSH.ORIG_SYS_DOCUMENT_REF = PORH.SEGMENT1
       AND OSH.SOURCE_DOCUMENT_ID = PORH.REQUISITION_HEADER_ID
       AND PORL.SOURCE_TYPE_CODE = 'INVENTORY'
       AND PORH.REQUISITION_HEADER_ID = PORL.REQUISITION_HEADER_ID
       AND OOG.ORGANIZATION_ID = PORL.SOURCE_ORGANIZATION_ID
       AND OOG.LANGUAGE = USERENV('LANG')
       AND OOD.ORGANIZATION_ID = PORH.ORG_ID
       AND OOD.LANGUAGE = USERENV('LANG')
       AND (OSH.ORDER_NUMBER = :4 AND 1 = :5)
   ]]></SQLQuery>
   <DesignTime>
      <Attr Name="_isCodegen" Value="true" />
      <Attr Name="_isExpertMode" Value="true" />
      <Attr Name="_version" Value="10.1.3.41.57" />
      <Attr Name="_codeGenFlag2" Value="Access|Coll" />
   </DesignTime>
   <ViewAttribute
      Name="OrderType"
      IsQueriable="false"
      IsPersistent="false"
      Precision="80"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="ORDER_TYPE"
      Expression="ORDER_TYPE"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="80" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="OrderTypeCode"
      IsQueriable="false"
      IsPersistent="false"
      Precision="7"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="ORDER_TYPE_CODE"
      Expression="ORDER_TYPE_CODE"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="7" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="OrderId"
      IsQueriable="false"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="VARCHAR2"
      AliasName="ORDER_ID"
      Expression="ORDER_ID"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="22" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="PoNumber"
      IsQueriable="false"
      IsPersistent="false"
      Precision="40"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="PO_NUMBER"
      Expression="PO_NUMBER"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="40" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="ReleaseNum"
      IsQueriable="false"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="VARCHAR2"
      AliasName="RELEASE_NUM"
      Expression="RELEASE_NUM"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="22" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="PoNumRelNum"
      IsQueriable="false"
      IsPersistent="false"
      Precision="61"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="PO_NUM_REL_NUM"
      Expression="PO_NUM_REL_NUM"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="61" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="Source"
      IsQueriable="false"
      IsPersistent="false"
      Precision="240"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="SOURCE"
      Expression="SOURCE"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="240" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="SupplierSite"
      IsQueriable="false"
      IsPersistent="false"
      Precision="15"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="SUPPLIER_SITE"
      Expression="SUPPLIER_SITE"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="15" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="OperatingUnit"
      IsQueriable="false"
      IsPersistent="false"
      Precision="240"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="OPERATING_UNIT"
      Expression="OPERATING_UNIT"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="240" />
      </DesignTime>
   </ViewAttribute>
</ViewObject>
