<?xml version="1.0" encoding='windows-1252'?>
<!DOCTYPE ViewObject SYSTEM "jbo_03_01.dtd">

<ViewObject
   Name="ODShipToLocationsVO"
   OrderBy="address"
   BindingStyle="Oracle"
   CustomQuery="true"
   RowClass="od.oracle.apps.xxfin.ar.irec.accountDetails.server.ODShipToLocationsVORowImpl"
   ComponentClass="od.oracle.apps.xxfin.ar.irec.accountDetails.server.ODShipToLocationsVOImpl"
   MsgBundleClass="oracle.jbo.common.JboResourceBundle"
   UseGlueCode="false" >
   <SQLQuery><![CDATA[
SELECT address_id,address,site_use_id FROM
  (SELECT DISTINCT ship_to_site_use_id
                  ,bill_to_site_use_id 
   FROM RA_CUSTOMER_TRX_ALL 
   WHERE bill_to_site_use_id= :1 ) SITES,

  (SELECT -- See AR_SHIP_ADDRESS_V
     a_ps.orig_system_reference address_id, 
     NVL2(address_lines_phonetic, address_lines_phonetic || ', ', '') ||
        SUBSTR(a_loc.address1, 1, 25) || ', ' || 
        NVL2(a_loc.address2,SUBSTR(a_loc.address2, 1, 25) || ', ','') || 
        NVL2(a_loc.address3,SUBSTR(a_loc.address3, 1, 25) || ', ','') || 
        NVL2(a_loc.address4,SUBSTR(a_loc.address4, 1, 25) || ', ','') || 
        NVL2(a_loc.city,a_loc.city || ', ','') || nvl(a_loc.state, a_loc.province) || ' ' || 
        NVL2(a_loc.postal_code,DECODE(LENGTH(a_loc.postal_code),9,SUBSTR(a_loc.postal_code,1,5) || '-' || SUBSTR(a_loc.postal_code,6),a_loc.postal_code) || ', ','') || 
        t.territory_short_name address,
     su.site_use_id site_use_id
   FROM 
     fnd_territories_vl t,
     hz_cust_site_uses su,
     hz_cust_acct_sites a,
     hz_party_sites a_ps,
     hz_locations a_loc,
     hz_loc_assignments a_loc_assign
   WHERE a.cust_acct_site_id = su.cust_acct_site_id
    AND a.party_site_id = a_ps.party_site_id
    AND a_loc.location_id = a_ps.location_id
    AND a_loc.location_id = a_loc_assign.location_id
    AND nvl(a.org_id,   -99) = nvl(a_loc_assign.org_id,   -99)
    AND a_loc.country = t.territory_code
    AND su.site_use_code = 'SHIP_TO'
    AND a.cust_account_id = :2 ) ADDRESSES

WHERE ADDRESSES.site_use_id 
    = SITES.ship_to_site_use_id (+)
  AND (bill_to_site_use_id= :3 OR :4 IS NULL)
   ]]></SQLQuery>
   <DesignTime>
      <Attr Name="_isCodegen" Value="true" />
      <Attr Name="_version" Value="9.0.3.13.93" />
      <Attr Name="_CodeGenFlagNew" Value="36" />
   </DesignTime>
   <ViewAttribute
      Name="AddressId"
      IsUpdateable="false"
      IsPersistent="false"
      Precision="240"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="ADDRESS_ID"
      Expression="ADDRESS_ID"
      SQLType="VARCHAR" >
   </ViewAttribute>
   <ViewAttribute
      Name="address"
      IsUpdateable="false"
      IsPersistent="false"
      Precision="255"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="address"
      Expression="address"
      SQLType="VARCHAR" >
   </ViewAttribute>
   <ViewAttribute
      Name="SiteUseId"
      IsUpdateable="false"
      IsPersistent="false"
      IsNotNull="true"
      Precision="15"
      Scale="0"
      Type="oracle.jbo.domain.Number"
      ColumnType="NUMBER"
      AliasName="SITE_USE_ID"
      Expression="SITE_USE_ID"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="22" />
      </DesignTime>
   </ViewAttribute>
</ViewObject>
