<?xml version='1.0' encoding='windows-1252' ?>
<!DOCTYPE ViewObject SYSTEM "jbo_03_01.dtd">
<!--
 Author: Madhu Bolli
 Component Id: 
 Script Location: $CUSTOM_JAVA_TOP/od/oracle/apps/xxfin/ap/pos/isp/server/
 Description: Considered R12 PosHpOrdersVO.xml and added custom code.
 History:
 Name            Date         Version    Description
 Madhu Bolli     02-Aug-2016   1.1       Retrofitted for 12.2.5 above seeded version(120.6.12020000.2)
-->
<!-- $Header: PosHpOrdersVO.xml 120.6.12020000.2 2013/02/09 13:26:01 hvutukur ship $ -->

<ViewObject
   Name="ODPosHpOrdersVO"
   Extends="oracle.apps.pos.isp.server.PosHpOrdersVO"
   OrderBy="approved_date desc"
   BindingStyle="Oracle"
   CustomQuery="true"
   UseGlueCode="false" >
   <SQLQuery><![CDATA[
SELECT
     'PO' PO_RELEASE_FLAG,
     POH.APPROVED_DATE ,
     POH.COMMENTS ,
     POH.PO_HEADER_ID,
     POH.VENDOR_CONTACT_ID,
     POH.VENDOR_ID,
     POH.VENDOR_SITE_ID,
     POH.CLM_DOCUMENT_NUMBER PO_NUMBER,
     TO_NUMBER(NULL) RELEASE_NUM,
     NULL RELEASE_TYPE,
     TO_NUMBER(NULL) PO_RELEASE_ID,
     POH.CREATION_DATE, 
     POH.AGENT_ID,
     NVL(PDSH.CLM_FLAG,'N') CLM_FLAG
FROM 
     PO_HEADERS_ARCHIVE_ALL POH, PO_HEADERS_ALL PH, PO_DOC_STYLE_HEADERS PDSH
     , (SELECT decode(RESPONSIBILITY_KEY,'XX_ISUPP_EXTNL_RESP', 'Y', 'N') extResp FROM FND_RESPONSIBILITY where responsibility_id = fnd_global.resp_id ) respCheck
WHERE 
     POH.TYPE_LOOKUP_CODE IN ('BLANKET','CONTRACT','PLANNED','STANDARD') AND
     NVL(POH.CLOSED_CODE,'OPEN') not in ('CLOSED','FINALLY CLOSED') AND 
     NVL(POH.CANCEL_FLAG,'N') = 'N' AND
     POH.LATEST_EXTERNAL_FLAG = 'Y' AND      
     POH.PO_HEADER_ID = PH.PO_HEADER_ID AND
     NVL(POH.STYLE_ID, 1) = PDSH.STYLE_ID (+) AND
     PDSH.STATUS (+) = 'ACTIVE' AND
     ( POH.CLOSED_DATE IS NULL
        OR 
     POH.CLOSED_DATE > DECODE(respCheck.extResp, 'Y', trunc(add_months(sysdate, -6)),POH.CLOSED_DATE-1) 
     )  
UNION ALL
  SELECT /*+ USE_NL(POR POH) */ 
     'RELEASE' PO_RELEASE_FLAG,
     POR.APPROVED_DATE ,
     POH.COMMENTS ,
     POR.PO_HEADER_ID,
     POH.VENDOR_CONTACT_ID,
     POH.VENDOR_ID,
     POH.VENDOR_SITE_ID,
     POH.CLM_DOCUMENT_NUMBER||'-'||POR.RELEASE_NUM PO_NUMBER,
     POR.RELEASE_NUM,
     POR.RELEASE_TYPE,
     POR.PO_RELEASE_ID,
     POR.CREATION_DATE, 
     POR.AGENT_ID,
     'N' CLM_FLAG 
  FROM 
     PO_RELEASES_ARCHIVE_ALL POR, PO_RELEASES_ALL PR, 
     PO_HEADERS_ARCHIVE_ALL POH
     , (SELECT decode(RESPONSIBILITY_KEY,'XX_ISUPP_EXTNL_RESP', 'Y', 'N') extResp FROM FND_RESPONSIBILITY where responsibility_id = fnd_global.resp_id ) respCheck
  WHERE POH.PO_HEADER_ID = POR.PO_HEADER_ID AND
     POH.TYPE_LOOKUP_CODE IN ( 'BLANKET','PLANNED') AND 
     NVL(POR.CLOSED_CODE,'OPEN') NOT IN ('CLOSED','FINALLY CLOSED') AND 
     NVL(POR.CANCEL_FLAG,'N') = 'N' AND
     POH.LATEST_EXTERNAL_FLAG = 'Y' AND
     POR.LATEST_EXTERNAL_FLAG = 'Y' AND 
     POR.PO_RELEASE_ID = PR.PO_RELEASE_ID AND
     ( POH.CLOSED_DATE IS NULL
        OR 
     POH.CLOSED_DATE > DECODE(respCheck.extResp, 'Y', trunc(add_months(sysdate, -6)),POH.CLOSED_DATE-1) 
     ) 
   ]]></SQLQuery>
   <DesignTime>
      <Attr Name="_isExpertMode" Value="true" />
      <Attr Name="_version" Value="10.1.3.43.6" />
      <Attr Name="_codeGenFlag2" Value="Access|Coll|VarAccess" />
   </DesignTime>
   <ViewAttribute
      Name="PoReleaseFlag"
      IsQueriable="false"
      IsPersistent="false"
      Precision="7"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="PO_RELEASE_FLAG"
      Expression="PO_RELEASE_FLAG"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="7" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="ApprovedDate"
      IsQueriable="false"
      IsPersistent="false"
      Type="oracle.jbo.domain.Date"
      ColumnType="DATE"
      AliasName="APPROVED_DATE"
      Expression="APPROVED_DATE"
      SQLType="DATE" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="20" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="Comments"
      IsQueriable="false"
      IsPersistent="false"
      Precision="240"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="COMMENTS"
      Expression="COMMENTS"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="240" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="PoHeaderId"
      IsQueriable="false"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="NUMBER"
      AliasName="PO_HEADER_ID"
      Expression="PO_HEADER_ID"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="VendorContactId"
      IsQueriable="false"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="NUMBER"
      AliasName="VENDOR_CONTACT_ID"
      Expression="VENDOR_CONTACT_ID"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="VendorId"
      IsQueriable="false"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="NUMBER"
      AliasName="VENDOR_ID"
      Expression="VENDOR_ID"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="VendorSiteId"
      IsQueriable="false"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="NUMBER"
      AliasName="VENDOR_SITE_ID"
      Expression="VENDOR_SITE_ID"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="PoNumber"
      IsQueriable="false"
      IsPersistent="false"
      Precision="240"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="PO_NUMBER"
      Expression="PO_NUMBER"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="61" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="ReleaseNum"
      IsQueriable="false"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="NUMBER"
      AliasName="RELEASE_NUM"
      Expression="RELEASE_NUM"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="ReleaseType"
      IsQueriable="false"
      IsPersistent="false"
      Precision="25"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="RELEASE_TYPE"
      Expression="RELEASE_TYPE"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="25" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="PoReleaseId"
      IsQueriable="false"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="NUMBER"
      AliasName="PO_RELEASE_ID"
      Expression="PO_RELEASE_ID"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="CreationDate"
      IsQueriable="false"
      IsPersistent="false"
      Type="oracle.jbo.domain.Date"
      ColumnType="DATE"
      AliasName="CREATION_DATE"
      Expression="CREATION_DATE"
      SQLType="DATE" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="20" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="AgentId"
      IsQueriable="false"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="VARCHAR2"
      AliasName="AGENT_ID"
      Expression="AGENT_ID"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="22" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="ClmFlag"
      IsPersistent="false"
      Precision="1"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="CLM_FLAG"
      Expression="CLM_FLAG"
      SQLType="VARCHAR" >
      <DesignTime>
		 <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="1" />
      </DesignTime>
   </ViewAttribute>
</ViewObject>
