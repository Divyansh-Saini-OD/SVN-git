<?xml version='1.0' encoding='windows-1252' ?>
<!DOCTYPE ViewObject SYSTEM "jbo_03_01.dtd">

<ViewObject
   Name="ODBusClassVO"
   Extends="oracle.apps.pos.supplier.server.BusClassVO"
   OrderBy="to_number(attribute1), selected desc, switcher_name desc"
   BindingStyle="Oracle"
   CustomQuery="true"
   RowClass="od.oracle.apps.xxfin.ap.pos.supplier.server.ODBusClassVORowImpl"
   ComponentClass="od.oracle.apps.xxfin.ap.pos.supplier.server.ODBusClassVOImpl"
   UseGlueCode="false" >
   <SQLQuery><![CDATA[
select 
flv.lookup_type, flv.lookup_code, flv.meaning, flv.description,
sysdate, pca.expiration_date, pca.classification_id,
pca.certification_no, pca.certification_agency , 
'A' as status, -1 as pca_code_assignment_id,
pca.created_by, pca.creation_date,
pca.last_update_date as last_update_date,
pca.last_updated_by as pca_last_upadated_by,
pca.ext_attr_1, 
'Y' as selected, 
'PENDING' as class_status,
null as Minority_type, -- dont use
decode(flv.lookup_code, 'MINORITY_OWNED', 'MinorityType', 'FOB', 'ForeignMinorityType', 'DummyVal') as Switcher_name,
 pca.BUS_CLASS_REQUEST_ID as request_id,
 NULL AS vendor_id,
 NULL AS party_site_id,
 NULL AS vendor_site_id,
flv.attribute1 
from fnd_lookup_values_vl flv,
pos_bus_class_reqs pca
where flv.enabled_flag='Y'
and flv.start_date_active < sysdate
and (flv.end_date_active > sysdate or flv.end_date_active is null)
and flv.lookup_type = 'POS_BUSINESS_CLASSIFICATIONS'
and flv.lookup_type = pca.lookup_type 
and flv.lookup_code = pca.lookup_code 
and pca.mapping_id in
(select mapping_id from pos_supplier_mappings where party_id = :1)
and pca.request_status = 'PENDING'
and pca.request_type in ( 'ADD', 'UPDATE' ) 

union
select 
flv.lookup_type, flv.lookup_code, flv.meaning, flv.description,
pca.start_date_active, pca.expiration_date, pca.classification_id,
pca.certificate_number, pca.certifying_agency , 
pca.status as status, pca.party_id as pca_code_assignment_id,
pca.created_by, pca.creation_date,
pca.last_update_date as last_update_date,
pca.last_updated_by as pca_last_upadated_by,
pca.ext_attr_1, 
decode(pca.status,'A','Y','N') as selected,
pca.class_status,
null as Minority_type, -- dont use
decode(flv.lookup_code, 'MINORITY_OWNED', 'MinorityType', 'FOB', 'ForeignMinorityType', 'DummyVal') as Switcher_name,
null as request_id,
 pca.vendor_id AS vendor_id,
 pca.party_site_id AS party_site_id,
 pca.vendor_site_id AS vendor_site_id,
flv.attribute1
from fnd_lookup_values_vl flv,
POS_BUS_CLASS_ATTR pca
where flv.enabled_flag='Y'
and flv.start_date_active < sysdate
and (flv.end_date_active > sysdate or flv.end_date_active is null)
and flv.lookup_type = 'POS_BUSINESS_CLASSIFICATIONS'
and flv.lookup_type = pca.lookup_type 
and flv.lookup_code = pca.lookup_code 
and pca.party_id = :2
AND pca.party_site_id IS NULL
AND pca.vendor_site_id IS null
and ( pca.end_date_active is null or trunc(pca.end_date_active) > sysdate )
and pca.status='A'
and pca.class_status = 'APPROVED'
and pca.classification_id not in 
( 
select classification_id from pos_bus_class_reqs pbcr, pos_supplier_mappings psm
where psm.party_id = pca.party_id 
and psm.mapping_id = pbcr.mapping_id
and pbcr.request_status = 'PENDING'
and pbcr.request_type in ( 'ADD', 'UPDATE' )
and pbcr.classification_id is not null
)

UNION

 select 
 flv.lookup_type, flv.lookup_code, flv.meaning, flv.description,
 --pca.start_date_active, pca.end_date_active, pca.classification_id,
 to_date(null), to_date(null), to_number(null),
 --pca.certification_number, pca.certifying_agency , 
 null, null, 
 --pca.status, pca.party_id as pca_code_assignment_id,
 null, to_number(null),
 --pca.created_by, pca.creation_date,
 to_number(null), to_date(null),
 --pca.last_update_date as last_update_date,
 --pca.last_updated_by as pca_last_upadated_by,
 --pca.ext_attr_1, 
 to_date(null), to_number(null), null,
 --decode(pca.status,'A','Y','N') as selected
 'N' as selected,
 null,
 null,
 decode(flv.lookup_code, 'MINORITY_OWNED', 'MinorityType', 'FOB', 'ForeignMinorityType', 'DummyVal') as Switcher_name,
 null as request_id,
 NULL AS vendor_id,
 NULL AS party_site_id,
 NULL AS vendor_site_id,
 flv.attribute1
 from fnd_lookup_values_vl flv
 --POS_BUS_CLASS_ATTR pca
 where flv.enabled_flag='Y'
 and flv.start_date_active < sysdate
 and (flv.end_date_active > sysdate or flv.end_date_active is null)
 and flv.lookup_type = 'POS_BUSINESS_CLASSIFICATIONS'
 --and flv.lookup_type = pca.lookup_type 
 and flv.lookup_code 
 not in 
 (
    select  lookup_code
    from pos_bus_class_attr pca1
    where 
    pca1.status = 'A'
    and ( pca1.end_date_active is null or trunc(pca1.end_date_active) > sysdate )
    and pca1.lookup_type = 'POS_BUSINESS_CLASSIFICATIONS'
    and pca1.party_id = :3
    AND pca1.party_site_id IS NULL
    AND pca1.vendor_site_id IS NULL 
    and pca1.class_status in ('APPROVED')
	
	union
	select pbcr.LOOKUP_CODE from pos_bus_class_reqs pbcr, pos_supplier_mappings psm
	where psm.party_id = :4 
	and psm.mapping_id = pbcr.mapping_id
	and pbcr.request_status = 'PENDING'
	and pbcr.request_type in ('ADD', 'UPDATE')
 )
   ]]></SQLQuery>
   <DesignTime>
      <Attr Name="_isCodegen" Value="true" />
      <Attr Name="_isExpertMode" Value="true" />
      <Attr Name="_version" Value="10.1.3.43.6" />
      <Attr Name="_codeGenFlag2" Value="Coll|VarAccess" />
   </DesignTime>
   <ViewAttribute
      Name="LookupType"
      IsPersistent="false"
      Precision="30"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="LOOKUP_TYPE"
      Expression="LOOKUP_TYPE"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="30" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="LookupCode"
      IsPersistent="false"
      Precision="30"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="LOOKUP_CODE"
      Expression="LOOKUP_CODE"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="30" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="Meaning"
      IsPersistent="false"
      Precision="80"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="MEANING"
      Expression="MEANING"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="80" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="Description"
      IsPersistent="false"
      Precision="240"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="DESCRIPTION"
      Expression="DESCRIPTION"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="240" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="Sysdate"
      IsPersistent="false"
      Type="oracle.jbo.domain.Date"
      ColumnType="DATE"
      AliasName="SYSDATE"
      Expression="SYSDATE"
      SQLType="DATE" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="7" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="ExpirationDate"
      IsPersistent="false"
      Type="oracle.jbo.domain.Date"
      ColumnType="DATE"
      AliasName="EXPIRATION_DATE"
      Expression="EXPIRATION_DATE"
      SQLType="DATE" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="7" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="ClassificationId"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="NUMBER"
      AliasName="CLASSIFICATION_ID"
      Expression="CLASSIFICATION_ID"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="22" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="CertificationNo"
      IsPersistent="false"
      Precision="80"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="CERTIFICATION_NO"
      Expression="CERTIFICATION_NO"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="80" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="CertificationAgency"
      IsPersistent="false"
      Precision="255"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="CERTIFICATION_AGENCY"
      Expression="CERTIFICATION_AGENCY"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="255" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="Status"
      IsPersistent="false"
      Precision="1"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="STATUS"
      Expression="STATUS"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="1" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="PcaCodeAssignmentId"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="NUMBER"
      AliasName="PCA_CODE_ASSIGNMENT_ID"
      Expression="PCA_CODE_ASSIGNMENT_ID"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="22" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="CreatedBy"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="NUMBER"
      AliasName="CREATED_BY"
      Expression="CREATED_BY"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="22" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="CreationDate"
      IsPersistent="false"
      Type="oracle.jbo.domain.Date"
      ColumnType="DATE"
      AliasName="CREATION_DATE"
      Expression="CREATION_DATE"
      SQLType="DATE" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="7" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="LastUpdateDate"
      IsPersistent="false"
      Type="oracle.jbo.domain.Date"
      ColumnType="DATE"
      AliasName="LAST_UPDATE_DATE"
      Expression="LAST_UPDATE_DATE"
      SQLType="DATE" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="7" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="PcaLastUpadatedBy"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="NUMBER"
      AliasName="PCA_LAST_UPADATED_BY"
      Expression="PCA_LAST_UPADATED_BY"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="22" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="ExtAttr1"
      IsPersistent="false"
      Precision="240"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="EXT_ATTR_1"
      Expression="EXT_ATTR_1"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="240" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="Selected"
      IsPersistent="false"
      Precision="1"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="SELECTED"
      Expression="SELECTED"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="1" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="ClassStatus"
      IsPersistent="false"
      Precision="255"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="CLASS_STATUS"
      Expression="CLASS_STATUS"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="255" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="MinorityType"
      IsPersistent="false"
      Precision="240"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="MINORITY_TYPE"
      Expression="MINORITY_TYPE"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="240" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="SwitcherName"
      IsPersistent="false"
      Precision="12"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="SWITCHER_NAME"
      Expression="SWITCHER_NAME"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="12" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="RequestId"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="NUMBER"
      AliasName="REQUEST_ID"
      Expression="REQUEST_ID"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="22" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="VendorId"
      IsUpdateable="false"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="NUMBER"
      AliasName="VENDOR_ID"
      Expression="VENDOR_ID"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="22" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="PartySiteId"
      IsUpdateable="false"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="NUMBER"
      AliasName="PARTY_SITE_ID"
      Expression="PARTY_SITE_ID"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="22" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="VendorSiteId"
      IsUpdateable="false"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="NUMBER"
      AliasName="VENDOR_SITE_ID"
      Expression="VENDOR_SITE_ID"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="22" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="RowChanged"
      IsSelected="false"
      IsPersistent="false"
      Precision="255"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="VIEW_ATTR"
      Passivate="true"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="Attribute1"
      IsPersistent="false"
      Precision="150"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="ATTRIBUTE1"
      Expression="ATTRIBUTE1"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="150" />
      </DesignTime>
   </ViewAttribute>
</ViewObject>
