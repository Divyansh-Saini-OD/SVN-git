package od.oracle.apps.xxcrm.cdh.ebl.server;
import oracle.apps.fnd.framework.server.OAApplicationModuleImpl;
import oracle.jbo.RowIterator;
import oracle.jbo.Row;
import oracle.apps.fnd.framework.OAException;

//  ---------------------------------------------------------------
//  ---    File generated by Oracle Business Components for Java.
//  ---------------------------------------------------------------

public class EbillingParamAMImpl extends OAApplicationModuleImpl 
{
  /**
   * 
   * This is the default constructor (do not remove)
   */
  public EbillingParamAMImpl()
  {
  }

  /**
   * 
   * Container's getter for EbillingParamSetupVO1
   */
  public EbillingParamSetupVOImpl getEbillingParamSetupVO1()
  {
    return (EbillingParamSetupVOImpl)findViewObject("EbillingParamSetupVO1");
  }

  /**
   * 
   * Sample main for debugging Business Components code using the tester.
   */
  public static void main(String[] args)
  {
    launchTester("od.oracle.apps.xxcrm.cdh.ebl.server", "EbillingParamAMLocal");
  }

  /**
   * 
   * Container's getter for ParamVO1
   */
  public ParamVOImpl getParamVO1()
  {
    return (ParamVOImpl)findViewObject("ParamVO1");
  }

  //This api performs query initialization
  public void initQuery()
  {
    EbillingParamSetupVOImpl vo1 = this.getEbillingParamSetupVO1();
    ParamVOImpl vo2 = this.getParamVO1();
    
    if(!vo1.isPreparedForExecution())
      vo1.executeQuery();

    if(!vo2.isPreparedForExecution())
      vo2.executeQuery();
    
  }

  public void initParamMapQuery()
  {
    if(!this.getEbillingParamModifyVO1().isPreparedForExecution())
      this.getEbillingParamModifyVO1().executeQuery(); 
  }

  public void deleteRows()
  {
     Row delRows[] = this.getEbillingParamSetupVO1().getFilteredRows("SelectFlag","Y");
     int rowNum = 0;

     if(delRows!=null){
       rowNum = delRows.length;
     
       for(int i=0;i<delRows.length;i++)
         delRows[i].remove();
     }
     
     if(rowNum==0)
       throw new OAException("None of the rows were deleted",OAException.INFORMATION);        
     else if(rowNum==1)
       throw new OAException(rowNum+" row has been deleted",OAException.INFORMATION);   
     else
       throw new OAException(rowNum+" rows have been deleted",OAException.INFORMATION);  
    
  }

  public void saveWork()
  {
    this.getOADBTransaction().commit();

  }

  public void handleRendering(String rowRef,String sourceLOV)
  {
    checkUserLevelrendering(rowRef);
  }

  private void checkUserLevelrendering(String ref)
  {
    EbillingParamSetupVORowImpl r = (EbillingParamSetupVORowImpl)this.findRowByRef(ref);
   // System.out.println("Attr val1: "+r.getAttribute("RenderUser")+" "+r.getAttribute("ParamValue"));
   // System.out.println("Val1: "+r.getRenderUser());
    r.setAttribute("RenderUser",Boolean.FALSE);
   //    System.out.println("Val2: "+r.getRenderUser());
  //  System.out.println("Attr val2: "+r.getAttribute("RenderUser")+" "+r.getAttribute("ParamValue"));
  }

  /**
   * 
   * Container's getter for EbillingParamModifyVO1
   */
  public EbillingParamModifyVOImpl getEbillingParamModifyVO1()
  {
    return (EbillingParamModifyVOImpl)findViewObject("EbillingParamModifyVO1");
  }
  
  
}