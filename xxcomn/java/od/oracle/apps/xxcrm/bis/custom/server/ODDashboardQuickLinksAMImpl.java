package od.oracle.apps.xxcrm.bis.custom.server;

import od.oracle.apps.xxcrm.bis.custom.poplist.server.ODLinkCategoriesVOImpl;
import od.oracle.apps.xxcrm.bis.custom.poplist.server.ODRelativeActualPathVOImpl;

import oracle.apps.fnd.framework.server.OAApplicationModuleImpl;
import oracle.apps.fnd.framework.OAViewObject;
import oracle.apps.fnd.framework.server.OAViewObjectImpl;

import oracle.jbo.Row;
import oracle.jbo.RowSetIterator;
import oracle.jbo.domain.Number;

//  ---------------------------------------------------------------
//  ---    File generated by Oracle Business Components for Java.
//  ---------------------------------------------------------------

public class ODDashboardQuickLinksAMImpl extends OAApplicationModuleImpl {
  /**
   * 
   * This is the default constructor (do not remove)
   */
  public ODDashboardQuickLinksAMImpl()
  {
  }


  /**
   * 
   * Sample main for debugging Business Components code using the tester.
   */
  public static void main(String[] args)
  {
    launchTester("od.oracle.apps.xxcrm.bis.custom.server", "ODDashboardQuickLinksAMLocal");
  }


  public void initializeQuicklinksVO()
  {
    OAViewObject vo =  (OAViewObject)findViewObject("ODDashboardQuickLinksDisplayVO1");
 //  vo.setWhereClause(null);// Always reset
    vo.executeQuery();
  }

 
  public void createQuickLinks(String respId)
  {
    OAViewObject vo1 = (OAViewObject)getODDashboardQuickLinksDisplayVO1();
    if (!vo1.isPreparedForExecution())     
    {vo1.executeQuery();}  
    Row row = vo1.createRow();  
    //row.setAttribute("ResponsibilityKey",getRespKey(respId));
    vo1.insertRow(row);
    row.setNewRowState(Row.STATUS_INITIALIZED);
  } 

  public void updateQuickLinks(String respId)
  {
    OAViewObject vo =  (OAViewObject)findViewObject("ODDashboardQuickLinksDisplayVO1");
    Number resId = null;
           try
       {
    resId = new Number(respId);
           } 
       catch(Exception e) 
       {

       }
     vo.setWhereClause("QUICKLINK_ID = :1");
     vo.setWhereClauseParams(null); // Always reset
     vo.setWhereClauseParam(0, resId);
     vo.executeQuery();
  }
  
  public void apply()
  {
  getTransaction().commit();
  }

  public void deleteQuickLinks(String quickLinkId)
  {
    int idToDelete = Integer.parseInt(quickLinkId);
    OAViewObject vo = (OAViewObject)getODDashboardQuickLinksDisplayVO1(); 
    ODDashboardQuickLinksDisplayVORowImpl row = null;
    int fetchedRowCount = vo.getFetchedRowCount();
    RowSetIterator deleteIter = vo.createRowSetIterator("deleteIter");
    if (fetchedRowCount > 0) 
    { 
      deleteIter.setRangeStart(0); 
      deleteIter.setRangeSize(fetchedRowCount);
      for (int i = 0; i < fetchedRowCount; i++)
      {
        row = (ODDashboardQuickLinksDisplayVORowImpl)deleteIter.getRowAtRangeIndex(i);
       // Number id = (Number) row.getAttribute("QuicklinkId");
       //Number id = row.getAttribute("QuicklinkId");
       Number id = row.getQuicklinkId();
        if (id.compareTo(idToDelete) == 0)
        //if (id.intValue() == idToDelete)
        //if (id == idToDelete)
        {
          row.remove();
          getTransaction().commit(); 
          break;
        }
      }
    }
    deleteIter.closeRowSetIterator();
  }


 /* public String getRespKey (String respId)
  {
    OAViewObject vo = (OAViewObject)getODRespKeyVO1();
    vo.setWhereClause(null);
    vo.setWhereClause(" responsibility_id = " + respId);
    vo.executeQuery();
    return vo.first().getAttribute("ResponsibilityKey").toString();
  }*/

  /**
   * 
   * Container's getter for ODRelativeActualPathVO1
   */
  public ODRelativeActualPathVOImpl getODRelativeActualPathVO1()
  {
    return (ODRelativeActualPathVOImpl)findViewObject("ODRelativeActualPathVO1");
  }


    /**Container's getter for ODLinkCategoriesVO1
     */
    public ODLinkCategoriesVOImpl getODLinkCategoriesVO1() {
        return (ODLinkCategoriesVOImpl)findViewObject("ODLinkCategoriesVO1");
    }

    /**Container's getter for ODDashboardQuickLinksDisplayVO1
     */
    public ODDashboardQuickLinksDisplayVOImpl getODDashboardQuickLinksDisplayVO1() {
        return (ODDashboardQuickLinksDisplayVOImpl)findViewObject("ODDashboardQuickLinksDisplayVO1");
    }

    /**Container's getter for ODRespLovVO1
     */
    public OAViewObjectImpl getODRespLovVO1() {
        return (OAViewObjectImpl)findViewObject("ODRespLovVO1");
    }
}
