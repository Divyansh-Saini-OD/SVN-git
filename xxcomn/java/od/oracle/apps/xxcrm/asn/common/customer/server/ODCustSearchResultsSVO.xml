<?xml version="1.0" encoding='windows-1252'?>
<!DOCTYPE ViewObject SYSTEM "jbo_03_01.dtd">

<ViewObject
   Name="ODCustSearchResultsSVO"
   Extends="oracle.apps.asn.common.customer.server.CustSearchResultsSVO"
   BindingStyle="Oracle"
   CustomQuery="true"
   RowClass="od.oracle.apps.xxcrm.asn.common.customer.server.ODCustSearchResultsSVORowImpl"
   ComponentClass="od.oracle.apps.xxcrm.asn.common.customer.server.ODCustSearchResultsSVOImpl"
   MsgBundleClass="oracle.jbo.common.JboResourceBundle"
   UseGlueCode="false" >
   <SQLQuery><![CDATA[
select  hp.party_id,
        hp.party_name,
        hp.party_type,
        hp.party_number,
        hp.tax_reference,
        hz_format_pub.format_address(ps.location_id,null,null,' ') address,
        100 score,
        jgzz_fiscal_code taxpayer_id,
        hz_utility_v2pub.get_lookupmeaning('AR_LOOKUPS', 'PARTY_TYPE', 
party_type) type_lookup, (100||'%') percentage,
        terr.territory_short_name country, 
        hp.duns_number_c duns_number,
        hp.known_as known_as,
        hp.email_address email,
        hp.organization_name_phonetic,
        hp.person_first_name_phonetic,
        hp.person_last_name_phonetic,
        hz_format_phone_v2pub.get_formatted_phone(cp.contact_point_id) 
primary_phone,
        hp.url primary_url, 
        hz_utility_v2pub.get_lookupmeaning('AR_LOOKUPS', 
'HZ_PARTY_CERT_LEVEL', certification_level) certification_level_meaning
from     (select /*+ no_merge */ hzp.party_id customer_id
from
    xx_tm_nam_terr_defn         terr,
    xx_tm_nam_terr_entity_dtls  terr_ent,
    xx_tm_nam_terr_rsc_dtls     terr_rsc,
    hz_party_sites              hzps,
    hz_parties                  hzp,
    jtf_rs_resource_extns       jrb
where
   terr.named_acct_terr_id = terr_ent.named_acct_terr_id and
   terr.named_acct_terr_id = terr_rsc.named_acct_terr_id and
   sysdate between nvl(terr.start_date_active,sysdate-1) and nvl(terr.end_date_active,sysdate+1) and
   sysdate between nvl(terr_ent.start_date_active,sysdate-1) and nvl(terr_ent.end_date_active,sysdate+1) and
   sysdate between nvl(terr_rsc.start_date_active,sysdate-1) and nvl(terr_rsc.end_date_active,sysdate+1) and
   hzps.party_id = hzp.party_id and
   hzps.party_site_id = terr_ent.entity_id and
   terr_rsc.resource_id = jrb.resource_id and
   terr_ent.entity_type = 'PARTY_SITE' and
   jrb.category = 'EMPLOYEE' and
terr_rsc.resource_id = :1
         ) secu ,
        hz_parties hp,
        hz_party_sites ps,
        hz_contact_points cp,
        fnd_territories_tl terr
WHERE   hp.party_id = secu.customer_id
AND     hp.party_type  = 'ORGANIZATION'
AND     hp.status = 'A'
AND     hp.party_id = ps.party_id(+)
AND     ps.identifying_address_flag(+) = 'Y'
AND     hp.country=terr.territory_code(+)
AND     terr.language (+) = userenv('lang')
AND     hp.party_id = cp.owner_table_id(+)
AND     cp.owner_table_name(+) = 'HZ_PARTIES'
AND     cp.primary_flag(+) = 'Y'
AND     cp.contact_point_type(+) = 'PHONE'
order by score desc
   ]]></SQLQuery>
   <DesignTime>
      <Attr Name="_isCodegen" Value="true" />
      <Attr Name="_version" Value="9.0.3.13.93" />
      <Attr Name="_CodeGenFlagNew" Value="36" />
   </DesignTime>
   <ViewAttribute
      Name="PartyId"
      IsPersistent="false"
      IsNotNull="true"
      Precision="15"
      Scale="0"
      Type="oracle.jbo.domain.Number"
      ColumnType="VARCHAR2"
      AliasName="PARTY_ID"
      Expression="PARTY_ID"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="22" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="PartyName"
      IsPersistent="false"
      IsNotNull="true"
      Precision="360"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="PARTY_NAME"
      Expression="PARTY_NAME"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="360" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="PartyType"
      IsPersistent="false"
      IsNotNull="true"
      Precision="30"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="PARTY_TYPE"
      Expression="PARTY_TYPE"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="30" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="PartyNumber"
      IsPersistent="false"
      IsNotNull="true"
      Precision="30"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="PARTY_NUMBER"
      Expression="PARTY_NUMBER"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="30" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="TaxReference"
      IsPersistent="false"
      Precision="50"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="TAX_REFERENCE"
      Expression="TAX_REFERENCE"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="50" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="Address"
      IsPersistent="false"
      Precision="4000"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="ADDRESS"
      Expression="ADDRESS"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="4000" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="Score"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="VARCHAR2"
      AliasName="SCORE"
      Expression="SCORE"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="22" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="TaxpayerId"
      IsPersistent="false"
      Precision="20"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="TAXPAYER_ID"
      Expression="TAXPAYER_ID"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="20" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="TypeLookup"
      IsPersistent="false"
      Precision="4000"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="TYPE_LOOKUP"
      Expression="TYPE_LOOKUP"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="4000" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="Percentage"
      IsPersistent="false"
      Precision="4"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="PERCENTAGE"
      Expression="PERCENTAGE"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="4" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="Country"
      IsPersistent="false"
      Precision="80"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="COUNTRY"
      Expression="COUNTRY"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="80" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="DunsNumber"
      IsPersistent="false"
      Precision="30"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="DUNS_NUMBER"
      Expression="DUNS_NUMBER"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="30" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="KnownAs"
      IsPersistent="false"
      Precision="240"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="KNOWN_AS"
      Expression="KNOWN_AS"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="240" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="Email"
      IsPersistent="false"
      Precision="2000"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="EMAIL"
      Expression="EMAIL"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="2000" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="OrganizationNamePhonetic"
      IsPersistent="false"
      Precision="320"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="ORGANIZATION_NAME_PHONETIC"
      Expression="ORGANIZATION_NAME_PHONETIC"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="320" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="PersonFirstNamePhonetic"
      IsPersistent="false"
      Precision="60"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="PERSON_FIRST_NAME_PHONETIC"
      Expression="PERSON_FIRST_NAME_PHONETIC"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="60" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="PersonLastNamePhonetic"
      IsPersistent="false"
      Precision="60"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="PERSON_LAST_NAME_PHONETIC"
      Expression="PERSON_LAST_NAME_PHONETIC"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="60" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="PrimaryPhone"
      IsPersistent="false"
      Precision="4000"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="PRIMARY_PHONE"
      Expression="PRIMARY_PHONE"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="4000" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="PrimaryUrl"
      IsPersistent="false"
      Precision="2000"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="PRIMARY_URL"
      Expression="PRIMARY_URL"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="2000" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="CertificationLevelMeaning"
      IsPersistent="false"
      Precision="4000"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="CERTIFICATION_LEVEL_MEANING"
      Expression="CERTIFICATION_LEVEL_MEANING"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_OverrideAttr" Value="true" />
         <Attr Name="_DisplaySize" Value="4000" />
      </DesignTime>
   </ViewAttribute>
</ViewObject>
