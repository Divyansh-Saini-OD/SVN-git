<?xml version="1.0" encoding="WINDOWS-1252" ?>
<dataTemplate name="XXMAFUSR" description="OD : MAF App Install by Users Report" Version="1.0">
<parameters>
 <parameter name="p_user_name" datatype="character"/>
 <parameter name="p_application_id" datatype="number" />
</parameters>
<dataQuery>
<sqlStatement name="Q_INSTALL_LIST">
<![CDATA[
 SELECT FMAT.application_name
       ,FMAI.application_version "APP_STORE_VERSION"
       ,FMAI.app_install_id
       ,FMAI.user_name
       ,FU.description
       ,FU.email_address
       ,FMAI.device_model
       ,FMAI.device_os
       ,FMAI.device_udid
       ,FMAI.device_name
       ,TO_CHAR(FMAI.first_login_date,'DD-MON-YYYY') first_login_date
       ,TO_CHAR(FMAI.last_login_date,'DD-MON-YYYY') last_login_date
   FROM fnd_mbl_application_TL  FMAT
       ,fnd_mbl_app_installs    FMAI
       ,fnd_user                FU
  WHERE FMAI.application_id = FMAT.application_id
    AND FMAI.user_name      = FU.user_name
    AND FU.user_name = NVL(:p_user_name,FU.user_name)
    AND FMAT.application_id = NVL(:p_application_id,FMAT.application_id)
  ORDER BY 1, user_name
]]>
</sqlStatement>
<sqlStatement name="Q_LOGIN_DETAILS">
<![CDATA[
 SELECT a.user_name,
        per.full_name,
        per.email_address,
        c.application_name,
        count(1) total_login
   FROM per_all_people_f per, 
        fnd_mbl_application_tl c,
        fnd_mbl_app_installs b,
        fnd_mbl_app_usage a 
  WHERE a.start_time > SYSDATE - 365 
    AND b.app_install_id = a.app_install_id
    AND c.application_id = b.application_id
    AND per.employee_number = a.user_name
    AND TRUNC(SYSDATE) BETWEEN TRUNC(per.effective_start_date) AND TRUNC(per.effective_end_date)
    AND a.user_name = NVL(:p_user_name,a.user_name)
    AND c.application_id = NVL(:p_application_id,c.application_id)
  GROUP BY a.user_name,per.full_name,per.email_address,c.application_name
  ORDER BY 1,4
]]>
</sqlStatement>
</dataQuery>
<dataStructure>
<group name="G_INSTALL_LIST" source="Q_INSTALL_LIST">
  <element name="APPLICATION_NAME" value="APPLICATION_NAME" />
  <element name="APP_STORE_VERSION" value="APP_STORE_VERSION" />
  <element name="USER_NAME" value="USER_NAME" />  
  <element name="DESCRIPTION" value="DESCRIPTION" />
  <element name="EMAIL_ADDRESS" value="EMAIL_ADDRESS" />
  <element name="DEVICE_MODEL" value="DEVICE_MODEL" />  
  <element name="DEVICE_OS" value="DEVICE_OS" />
  <element name="DEVICE_UDID" value="DEVICE_UDID" />  
  <element name="DEVICE_NAME" value="DEVICE_NAME" />
  <element name="FIRST_LOGIN_DATE" value="FIRST_LOGIN_DATE" />  
  <element name="LAST_LOGIN_DATE" value="LAST_LOGIN_DATE" />    
</group>
<group name="G_LOGIN_DETAILS" source="Q_LOGIN_DETAILS">
  <element name="USER_NAME" value="USER_NAME" />
  <element name="FULL_NAME" value="FULL_NAME" />
  <element name="EMAIL_ADDRESS" value="EMAIL_ADDRESS" />  
  <element name="APPLICATION_NAME" value="APPLICATION_NAME" />
  <element name="TOTAL_LOGIN" value="TOTAL_LOGIN" />
</group>
</dataStructure>
</dataTemplate>