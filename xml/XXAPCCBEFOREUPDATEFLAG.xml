<dataTemplate name="XXAPCCBEFOREUPDATEFLAG" description="" defaultPackage="XX_AP_BEFOREUPDATE_BURST" Version="1.0">
<properties>
  <property name="scalable_mode" value="on" />
  <property name="rtf-output-default-font">Arial:8</property>
<property name="debug_mode" value="off" />
<property name="include_parameters" value="true"/>
</properties>
<parameters>
<parameter name="p_start_date" datatype="varchar2"/>
<parameter name="p_end_date" datatype="varchar2"/>
</parameters>
<dataQuery>
<sqlStatement name="Q_ALERT">
<![CDATA[
SELECT TRX_ID ,CARD_PROGRAM_ID,
 REFERENCE_NUMBER ,
to_char(TRANSACTION_DATE ,'DD-MM-YYYY') TRANSACTION_DATE,
 TRANSACTION_AMOUNT ,
 to_char(CREATION_DATE,'DD-MM-YYYY') CREATION_DATE ,
 CARD_ID,
 PAYMENT_FLAG,
DESCRIPTION,
TRANSACTION_TYPE
FROM APPS.AP_CREDIT_CARD_TRXNS_ALL
WHERE TRANSACTION_TYPE = '0402'
AND DEBIT_FLAG         in ('D','C')
AND PAYMENT_FLAG       ='Y'
AND DESCRIPTION        ='LATE PAYMENT CHARGE'
AND trunc(fnd_conc_date.string_to_date(CREATION_DATE)) between trunc (fnd_conc_date.string_to_date (:p_start_date)) and 
trunc (fnd_conc_date.string_to_date (:p_end_date))]]> 
</sqlStatement>
 <sqlStatement name="Q_ALERT1">
	 <![CDATA[select to_char(SYSDATE,'MM/DD/YYYY') CURRENT_DATE,
FND_PROFILE.VALUE('XX_XDO_SMTP_HOST') SMTP_SERVER,
1
 from dual]]>
 </sqlStatement>
 <sqlStatement name="Q_ALERT2">
 <![CDATA[SELECT instance_name FROM v$instance]]>
 </sqlStatement>
</dataQuery>
<dataStructure>
<group name="G_ALERT" source="Q_ALERT">
<element name="TRX_ID" value="TRX_ID" function="" />
<element name="CARD_PROGRAM_ID" value="CARD_PROGRAM_ID" function="" />
<element name="REFERENCE_NUMBER" value="REFERENCE_NUMBER" function="" />
<element name="TRANSACTION_DATE" value="TRANSACTION_DATE" function="" />
<element name="TRANSACTION_AMOUNT" value="TRANSACTION_AMOUNT" function="" />
<element name="CREATION_DATE" value="CREATION_DATE" function="" />
<element name="CARD_ID" value="CARD_ID" function="" />
<element name="PAYMENT_FLAG" value="PAYMENT_FLAG" function="" />
<element name="DESCRIPTION" value="DESCRIPTION" function="" />
<element name="TRANSACTION_TYPE" value="TRANSACTION_TYPE" function="" />
</group>
<group name="G_ALERT1" dataType="varchar2" source="Q_ALERT1">
	   <element name="CURRENT_DATE"   value="CURRENT_DATE"/>
       <element name="SMTP_SERVER" value="SMTP_SERVER"/>
	 </group>
	 <group name="G_ALERT2" dataType="varchar2" source="Q_ALERT2">
       <element name="INSTANCE_NAME"     value="INSTANCE_NAME"/>
	   </group>
</dataStructure>
<dataTrigger name="afterReport" source="XX_AP_BEFOREUPDATE_BURST.afterReport()"/>
</dataTemplate>