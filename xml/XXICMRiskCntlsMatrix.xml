<?xml version="1.0" encoding="ISO-8859-9" ?>
<dataTemplate name="XXICMRiskCntlsMatrix" description="R0037 The OD ICM Risk and Control Matrix Report are used for tracking all the risks, controls and audit procedures that are associated with an audit engagement" version="1.0">
  <parameters>
    <parameter name="p_engagement_name"     dataType="character"/>
    <parameter name="p_organization_name"   dataType="character"/>
    <parameter name="p_parent_process_name" dataType="character"/>
    <parameter name="p_process_name"        dataType="character"/>
    <parameter name="p_vice_president_name" dataType="character"/>
    <parameter name="p_key_user_name"       dataType="character"/>
    <parameter name="p_control_owner_name"  dataType="character"/>
    <parameter name="p_year"  		    dataType="character"/>
  </parameters>
  <properties>
    <property name="include_parameters" value="true"/>
  </properties>
  <dataQuery>
    <sqlStatement name="Q1">
       <![CDATA[SELECT   engagement_name,
                         organization,
                         parent_process,
                         process_name,
                         process_objective_name,
                         REPLACE(process_objective_description, CHR(10), ' ') process_objective_description,
                         risk_name,
                         REPLACE(risk_description, CHR(10), ' ') risk_description,
                         control_name,
                         REPLACE(control_description, CHR(10), ' ') control_description,
                         control_code,
                         "Control Type" control_type,
                         control_frequency_code,
                         "Control Frequency" control_frequency,
                         preventive_control,
                         detective_control,
                         "Vice President" vice_president,
                         "Key User" key_user,
                         "Control Owner" control_owner,
                         audit_procedure,
                         replace(audit_procedure_description,CHR(10),' ') audit_procedure_description, 
                         replace(audit_work_description,CHR(10),' ') audit_work_description, 
                         audit_status_code,
                         "Testing Status" test_status,
                         audit_opinion,
                         opinion_component_code,
                         control_aapproval_flag,
                         evaluated_by,
                         control_assertions
                FROM     xxod_icm_risk_control_matrix_v xircmv
                WHERE    (xircmv.engagement_name = :p_engagement_name 
                          OR :p_engagement_name IS NULL)
                AND      (xircmv.organization = :p_organization_name
                          OR :p_organization_name IS NULL)
                AND      (xircmv.parent_process = :p_parent_process_name
                          OR :parent_process_name IS NULL)
                AND      (xircmv.process_name = :p_process_name
                          OR :p_process_name IS NULL)
                AND      (xircmv."Vice President" = :p_vice_president_name
                          OR :p_vice_president_name IS NULL)
                AND      (xircmv."Key User" = :p_key_user_name
                          OR :p_key_user_name IS NULL)
                AND      (xircmv."Control Owner" = :p_control_owner_name
                          OR :p_control_owner_name IS NULL)
                AND      (substr(xircmv.engagement_name,1,4) = :p_year 
                          OR :p_year IS NULL)          
                ORDER BY parent_process,
                         process_name,
                         risk_name,
                         control_name,
                         audit_procedure]]>
    </sqlStatement>
  </dataQuery>
  <dataStructure>
    <group name="G_RISKS" source="Q1">
       <element name="ENGAGEMENT_NAME"               value="engagement_name"/>
       <element name="ORGANIZATION_NAME"             value="organization"/>
       <element name="PARENT_PROCESS_NAME"           value="parent_process"/>
       <element name="PROCESS_NAME"                  value="process_name"/>
       <element name="PROCESS_OBJECTIVE_NAME"        value="process_objective_name"/>
       <element name="PROCESS_OBJECTIVE_DESCRIPTION" value="process_objective_description"/>
       <element name="RISK_NAME"                     value="risk_name"/>
       <element name="RISK_DESCRIPTION"              value="risk_description"/>
       <element name="CONTROL_NAME"                  value="control_name"/>
       <element name="CONTROL_DESCRIPTION"           value="control_description"/>
       <element name="CONTROL_CODE"                  value="control_code"/>
       <element name="CONTROL_TYPE"                  value="control_type"/>
       <element name="CONTROL_FREQUENCY_CODE"        value="control_frequency_code"/>
       <element name="CONTROL_FREQUENCY"             value="control_frequency"/>
       <element name="PREVENTIVE_CONTROL"            value="preventive_control"/>
       <element name="DETECTIVE_CONTROL"             value="detective_control"/>
       <element name="VICE_PRESIDENT"                value="vice_president"/>
       <element name="KEY_USER"                      value="key_user"/>
       <element name="CONTROL_OWNER"                 value="control_owner"/>
       <element name="AUDIT_PROCEDURE"               value="audit_procedure"/>
       <element name="AUDIT_PROCEDURE_DESCRIPTION"   value="audit_procedure_description"/>
       <element name="AUDIT_WORK_DESCRIPTION"        value="audit_work_description"/>
       <element name="AUDIT_STATUS_CODE"             value="audit_status_code"/>
       <element name="TEST_STATUS"                   value="test_status"/>
       <element name="AUDIT_OPINION"                 value="audit_opinion"/>
       <element name="OPINION_COMPONENT_CODE"        value="opinion_component_code"/>
       <element name="CONTROL_AAPROVAL_FLAG"         value="control_aapproval_flag"/>
       <element name="EVALUATED_BY"                  value="evaluated_by"/>
       <element name="CONTROL_ASSERTIONS"            value="control_assertions"/>
    </group>
  </dataStructure> 
</dataTemplate>