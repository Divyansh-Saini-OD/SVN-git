<dataTemplate name="ProjectAccountingUploadAutomationReport" description="" Version="1.0">
<properties>
    <property name="scalable_mode" value="on" /> 
    <property name="rtf-output-default-font">Arial:8</property> 
</properties>
<parameters>
</parameters>
<dataQuery>
    <sqlStatement name="Q_PROJ_ASSET_INFO">
        <![CDATA[
        SELECT proj.segment1 "PROJECT_NUMBER",
              ppast.ASSET_NAME "ASSET_NAME",
              ppast.PROJECT_ASSET_TYPE,
              SUBSTR(ppast.estimated_in_service_date,1,10) "DATE_IN_SERVICE_ESTIMATED",
              SUBSTR(ppast.date_placed_in_service,1,10) "DATE_IN_SERVICE_ACTUAL",
			  ppast.BOOK_TYPE_CODE "BOOK_TYPE_CODE",
              fcat.SEGMENT1 "MAJOR_ASSET_CATEGORY",
              fcat.SEGMENT2 "MINOR_ASSET_CATEGORY",
              fcat.SEGMENT3 "SUBMINOR_ASSET_CATEGORY",
              fcat.SEGMENT1
              ||'.'
              ||fcat.SEGMENT2
              ||'.'
              ||fcat.SEGMENT3 "ASSET_CATEGORY",
              ppast.parent_asset_id "PARENT_ASSET_NUMBER",
              ppast.asset_number "ASSET_NUMBER",
              floc.segment5 "ASSET_LOCATION",
              gcc.segment1 "COMPANY",
              gcc.segment2 "COST_CENTER",
              gcc.segment3 "ACCOUNT",
              gcc.segment4 "LOCATION",
              gcc.segment5 "INTERCOMPANY",
              gcc.segment6 "LINE_OF_BUSINESS",
              gcc.segment7 "FUTURE",
              gcc.segment1
              ||'.'
              ||gcc.segment2
              ||'.'
              ||gcc.segment3
              ||'.'
              ||gcc.segment4
              ||'.'
              ||gcc.segment5
              ||'.'
              ||gcc.segment6
              ||'.'
              ||gcc.segment7 "DEPRECIATION_STRING",
              ppast.asset_units "UNITS",
              ppast.asset_description "ASSET_DESCRIPTION",
              ptask.task_number "TASK_NUMBER",
              upldstg.status_mesg "COMPLETION_STATUS",
              FND_GLOBAL.CONC_REQUEST_ID "REQUEST_ID"
            FROM PA_PROJECTS_ALL proj,
              PA_PROJECT_ASSETS_ALL ppast,
              FA_CATEGORIES fcat,
              GL_CODE_COMBINATIONS gcc,
              PA_PROJECT_ASSET_ASSIGNMENTS ppasg ,
              PA_TASKS ptask,
              FA_LOCATIONS floc,
              xx_pa_mass_upload_stg upldstg
            WHERE 1=1
            AND proj.PROJECT_ID                = ppast.PROJECT_ID
            AND status = 'P'
            AND ppast.asset_category_id         = fcat.category_id(+) --added outer join for defect# 25249
            AND ppast.depreciation_expense_ccid = gcc.code_combination_id(+) --added outer join for defect# 25249
            AND ppast.PROJECT_ASSET_ID          = ppasg.PROJECT_ASSET_ID
            AND ppast.project_id                = ppasg.project_id
            AND ppasg.TASK_ID                  = ptask.TASK_ID
            AND ptask.project_id				= ppast.project_id 
            AND upldstg.project_number           = proj.segment1
            AND upldstg.asset_name               = ppast.asset_name
			AND ppast.location_id				 = floc.location_id(+) --added outer join for defect# 25249
			        UNION
            SELECT PROJECT_NUMBER,
              ASSET_NAME,
              PROJECT_ASSET_TYPE,
              SUBSTR(DATE_IN_SERVICE_ESTIMATED,1,10) "DATE_IN_SERVICE_ESTIMATED",
              SUBSTR(DATE_IN_SERVICE_ACTUAL,1,10) "DATE_IN_SERVICE_ACTUAL",
			  BOOK_TYPE_CODE,
              MAJOR "MAJOR_ASSET_CATEGORY",
              MINOR "MINOR_ASSET_CATEGORY",
              SUBMINOR "SUBMINOR_ASSET_CATEGORY",
              ASSET_CATEGORY,
              to_number(PARENT_ASSET_NUMBER),
              ASSET_NUMBER,
              ASSET_LOCATION,
              COMPANY,
              COST_CENTER,
              ACCOUNT,
              LOCATION,
              INTERCOMPANY,
              LINE_OF_BUSINESS,
              FUTURE,
              COMPANY||'.'||COST_CENTER||'.'||ACCOUNT||'.'||LOCATION||'.'||INTERCOMPANY||'.'||LINE_OF_BUSINESS||'.'||FUTURE "DEPRECIATION_STRING",
              ACTUAL_UNITS "UNITS",
              ASSET_DESCRIPTION,
              TASK_NUMBER,
              STATUS_MESG "COMPLETION_STATUS",
              FND_GLOBAL.CONC_REQUEST_ID "REQUEST_ID"
            FROM xx_pa_mass_upload_stg e
            WHERE STATUS ='E'
            order by 1,2
        ]]> 
    </sqlStatement>
</dataQuery>
<dataStructure>
    <group name="G_PROJ_ASSET_INFO" source="Q_PROJ_ASSET_INFO">
        <element name="PROJECT_NUMBER" value="PROJECT_NUMBER" function="" /> 
        <element name="ASSET_NAME" value="ASSET_NAME" function="" /> 
        <element name="PROJECT_ASSET_TYPE" value="PROJECT_ASSET_TYPE" function="" />
        <element name="DATE_IN_SERVICE_ESTIMATED" value="DATE_IN_SERVICE_ESTIMATED" function="" />
        <element name="DATE_IN_SERVICE_ACTUAL" value="DATE_IN_SERVICE_ACTUAL" function="" /> 
		<element name="BOOK_TYPE_CODE" value="BOOK_TYPE_CODE" function="" />
        <element name="MAJOR_ASSET_CATEGORY" value="MAJOR_ASSET_CATEGORY" function="" />
        <element name="MINOR_ASSET_CATEGORY" value="MINOR_ASSET_CATEGORY" function="" />
        <element name="SUBMINOR_ASSET_CATEGORY" value="SUBMINOR_ASSET_CATEGORY" function="" />
        <element name="ASSET_CATEGORY" value="ASSET_CATEGORY" function="" />
        <element name="PARENT_ASSET_NUMBER" value="PARENT_ASSET_NUMBER" function="" />
        <element name="ASSET_NUMBER" value="ASSET_NUMBER" function="" />
        <element name="ASSET_LOCATION" value="ASSET_LOCATION" function="" />
        <element name="COMPANY" value="COMPANY" function="" />
        <element name="COST_CENTER" value="COST_CENTER" function="" />
        <element name="ACCOUNT" value="ACCOUNT" function="" />
        <element name="LOCATION" value="LOCATION" function="" />
        <element name="INTERCOMPANY" value="INTERCOMPANY" function="" />
        <element name="LINE_OF_BUSINESS" value="LINE_OF_BUSINESS" function="" />
        <element name="FUTURE" value="FUTURE" function="" />
        <element name="DEPRECIATION_STRING" value="DEPRECIATION_STRING" function="" />
        <element name="UNITS" value="UNITS" function="" />
        <element name="ASSET_DESCRIPTION" value="ASSET_DESCRIPTION" function="" />
        <element name="TASK_NUMBER" value="TASK_NUMBER" function="" />
        <element name="COMPLETION_STATUS" value="COMPLETION_STATUS" function="" />
        <element name="REQUEST_ID" value="REQUEST_ID" function="" />
    </group>
</dataStructure>
</dataTemplate>
