<?xml version="1.0" encoding="WINDOWS-1252" ?>
 <dataTemplate name="ESPReport" description="ESP Report" version="1.0">
  <parameters>
    <parameter name="P_APPLICATION" dataType="character" defaultValue=""/>
    <parameter name="P_JOB_NAME_1" dataType="character" defaultValue=""/>
    <parameter name="P_JOB_NAME_2" dataType="character" defaultvalue=""/>
  </parameters>
  <dataQuery>
    <sqlStatement name="Q_ESP_APPL_EXECUTION">
      <![CDATA[SELECT NVL(S.esp_schedule, 'Triggered') as ESP_SCHEDULE
               FROM   xxfin.xx_fin_esp_schedule S
               WHERE  S.esp_event = NVL(:esp1_application, S.esp_event)]]>
    </sqlStatement>
    <sqlStatement name="Q_ESP_JOB_DETAILS">
      <![CDATA[SELECT D.esp_detail_id   as esp1_detail_id,
                      D.esp_application as esp1_application,
                      D.esp_job_name_1  as esp1_job_name_1,
                      D.esp_job_name_2  as esp1_job_name_2,
                      D.esp_oa_user,
                      D.esp_pgm_short_name,
                      D.esp_pgm_user_name,
                      D.esp_responsibility
               FROM   xxfin.xx_fin_esp_details    D
               WHERE  1=1
               AND    D.esp_application = NVL(:p_application,D.esp_application)
               AND    D.esp_job_name_1  = NVL(:p_job_name_1, D.esp_job_name_1)
               AND    D.esp_job_name_2  = NVL(:p_job_name_2,D.esp_job_name_2)
               ORDER BY D.esp_application,
                        D.esp_job_name_1,
                        D.esp_job_name_2]]>
    </sqlStatement>
    <sqlStatement name="Q_ESP_JOB_LINKS">
      <![CDATA[SELECT L.esp_detail_id,
                      CASE L.esp_pgm_link_type
                           WHEN 'D' THEN 'Predecessor'
                           WHEN 'E' THEN 'External  '
                           WHEN 'R' THEN 'Releases  '
                           WHEN 'T' THEN 'Triggers  '
                           WHEN 'X' THEN 'External  '
                           ELSE          'UNKNOWN   '
                           END    AS esp_pgm_link_type,
                      L.esp_pgm_link_appl,
                      L.esp_pgm_link_job
               FROM   xxfin.xx_fin_esp_LINK       L
               WHERE  L.esp_detail_id = :esp1_detail_id
               ORDER BY L.esp_detail_id,
                        CASE L.esp_pgm_link_type
                                   WHEN 'D' THEN '3'
                                   WHEN 'E' THEN '1'
                                   WHEN 'R' THEN '4'
                                   WHEN 'T' THEN '5'
                                   WHEN 'X' THEN '2'
                                   ELSE          '9'
                                   END,
                        L.esp_pgm_link_appl,
                        L.esp_pgm_link_job]]>
    </sqlStatement>
    <sqlStatement name="Q_ESP_PGM_PARAMETERS">
      <![CDATA[SELECT P.esp_pgm_parm_name,
                      P.esp_pgm_parm_value
               FROM   xxfin.xx_fin_esp_parameters P
               WHERE  P.esp_application = NVL(:esp1_application,P.esp_application)
               AND    P.esp_job_name_1  = NVL(:esp1_job_name_1, P.esp_job_name_1)
               AND    P.esp_job_name_2  = NVL(:esp1_job_name_2,P.esp_job_name_2)
               ORDER BY P.esp_application,
                        P.esp_job_name_1,
                        p.esp_job_name_2,
                        P.esp_pgm_parm_seq]]>
    </sqlStatement>
    <sqlStatement name="Q_ESP_PGM_EXECUTION">
      <![CDATA[SELECT R.esp_pgm_runs
               FROM   xxfin.xx_fin_esp_runs R
               WHERE  R.esp_application = NVL(:esp1_application,R.esp_application)
               AND    R.esp_job_name_1  = NVL(:esp1_job_name_1, R.esp_job_name_1)
               AND    R.esp_job_name_2  = NVL(:esp1_job_name_2, R.esp_job_name_2)
               ORDER BY 1]]>
    </sqlStatement>
  </dataQuery>
  <dataStructure>
     <group name="G_ESP_JOB_DETAILS" source="Q_ESP_JOB_DETAILS">
        <element name="ESP1_DETAIL_ID" value="ESP1_DETAIL_ID"/>
        <element name="ESP1_APPLICATION" value="ESP1_APPLICATION"/>
        <element name="ESP1_JOB_NAME_1" value="ESP1_JOB_NAME_1"/>
        <element name="ESP1_JOB_NAME_2" value="ESP1_JOB_NAME_2"/>
        <element name="ESP_OA_USER" value="ESP_OA_USER"/>
        <element name="ESP_PGM_SHORT_NAME" value="ESP_PGM_SHORT_NAME"/>
        <element name="ESP_PGM_USER_NAME" value="ESP_PGM_USER_NAME"/>
        <element name="ESP_RESPONSIBILITY" value="ESP_RESPONSIBILITY"/>
     <group name="G_ESP_JOB_DEPENDENCIES" source="Q_ESP_JOB_LINKS">
        <element name="ESP_DETAIL_ID" value="ESP_DETAIL_ID"/>
        <element name="ESP_PGM_LINK_TYPE" value="ESP_PGM_LINK_TYPE"/>
        <element name="ESP_PGM_LINK_APPL" value="ESP_PGM_LINK_APPL"/>
        <element name="ESP_PGM_LINK_JOB" value="ESP_PGM_LINK_JOB"/>
     </group>
     <group name="G_ESP_PGM_PARAMETERS" source="Q_ESP_PGM_PARAMETERS">
        <element name="ESP_PGM_PARM_NAME" value="ESP_PGM_PARM_NAME"/>
        <element name="ESP_PGM_PARM_VALUE" value="ESP_PGM_PARM_VALUE"/>
     </group>
     <group name="G_ESP_APPL_EXECUTION" source="Q_ESP_APPL_EXECUTION">
        <element name="ESP_SCHEDULE" value="ESP_SCHEDULE"/>
     </group>
     <group name="G_ESP_PGM_EXECUTION" source="Q_ESP_PGM_EXECUTION">
        <element name="ESP_PGM_RUNS" value="ESP_PGM_RUNS"/>
     </group>
     </group>
  </dataStructure>
</dataTemplate>