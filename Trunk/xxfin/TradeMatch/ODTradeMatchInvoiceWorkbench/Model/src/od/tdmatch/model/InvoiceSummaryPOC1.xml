<?xml version="1.0" encoding="windows-1252" ?>
<!DOCTYPE ViewObject SYSTEM "jbo_03_01.dtd">
<!---->
<ViewObject
  xmlns="http://xmlns.oracle.com/bc4j"
  Name="InvoiceSummaryPOC1"
  Version="12.2.1.12.24"
  InheritPersonalization="merge"
  BindingStyle="OracleName"
  CustomQuery="true"
  RowClass="od.tdmatch.model.InvoiceSummaryPOC1RowImpl"
  ComponentClass="od.tdmatch.model.InvoiceSummaryPOC1Impl"
  PageIterMode="Full">
  <DesignTime>
    <Attr Name="_codeGenFlag2" Value="Coll"/>
    <Attr Name="_isExpertMode" Value="true"/>
    <Attr Name="_isCodegen" Value="true"/>
  </DesignTime>
  <Properties>
    <SchemaBasedProperties>
      <LABEL
        ResId="od.tdmatch.model.InvoiceSummaryPOC1_LABEL"/>
    </SchemaBasedProperties>
  </Properties>
  <ViewAccessor
    Name="InvoiceSummaryPOC1_1"
    ViewObjectName="od.tdmatch.model.InvoiceSummaryPOC1"
    RowLevelBinds="true"/>
  <SQLQuery><![CDATA[SELECT 
  (SELECT full_name 
  FROM per_all_people_f 
  WHERE sysdate BETWEEN effective_start_date AND effective_end_date 
  AND person_id = employee_id 
  ) vendor_assistant, 
  SUM(DECODE(hold_type,'TOTAL',inv_count,0)) total_inv_count, 
  SUM(DECODE(hold_type,'TOTAL',inv_amount,0)) total_inv_amount, 
  SUM(DECODE(hold_type,'MOOT',inv_count,0)) total_moot_count, 
  SUM(DECODE(hold_type,'MOOT',inv_amount,0)) total_moot_inv_amount, 
  SUM(DECODE(hold_type,'MOOT',line_total,0)) total_moot_line_amount, 
  SUM(DECODE(hold_type,'NRF',inv_count,0)) total_nrf_count, 
  SUM(DECODE(hold_type,'NRF',inv_amount,0)) total_nrf_amount 
FROM 
  (SELECT b1.employee_id, 
    a.invoice_id, 
    'TOTAL' hold_type, 
    a.amount inv_amount, 
    0 line_total , 
    1 inv_count 
  FROM sp_inv_hdr a, 
    ap_invoices_all b, 
    xx_ap_vend_asistnt b1 
  WHERE b.invoice_id    = a.invoice_id 
  AND b1.vendor_id      = b.vendor_id 
  AND b1.vendor_site_id = b.vendor_site_id 
  UNION 
  SELECT b1.employee_id, 
    a.invoice_id, 
    'MOOT' hold_type, 
    a.amount inv_amount, 
    SUM(b.amount) line_total, 
    1 inv_count 
  FROM sp_inv_hdr a , 
    sp_inv_dtl b , 
    sp_inv_hold c , 
    ap_invoices_all b2 , 
    xx_ap_vend_asistnt b1 
  WHERE b.invoice_id    = a.invoice_id 
  AND c.invoice_id      = b.invoice_id 
  AND c.line_no         = b.line_no 
  AND b2.invoice_id     = a.invoice_id 
  AND b1.vendor_id      = b2.vendor_id 
  AND b1.vendor_site_id = b2.vendor_site_id 
  AND NOT EXISTS 
    (SELECT 'x' 
    FROM sp_inv_hold c1 
    WHERE c1.invoice_id = b.invoice_id 
    AND c1.hold_type    = 'NOR_H' 
    ) 
  GROUP BY b1.employee_id, 
    a.invoice_id, 
    a.amount 
  UNION 
  SELECT b1.employee_id, 
    a.invoice_id, 
    'NRF' hold_type, 
    a.amount inv_amount, 
    0 line_total , 
    1 inv_count 
  FROM sp_inv_hdr a , 
    sp_inv_dtl b , 
    ap_invoices_all b2 , 
    xx_ap_vend_asistnt b1 
  WHERE b.invoice_id    = a.invoice_id 
  AND b2.invoice_id     = a.invoice_id 
  AND b1.vendor_id      = b2.vendor_id 
  AND b1.vendor_site_id = b2.vendor_site_id 
  AND EXISTS 
    (SELECT 'x' 
    FROM sp_inv_hold c 
    WHERE c.invoice_id = b.invoice_id 
    AND c.hold_type    = 'NOR_H' 
    ) 
  GROUP BY b1.employee_id, 
    a.invoice_id, 
    a.amount 
  ) 
GROUP BY employee_id]]></SQLQuery>
  <ViewAttribute
    Name="VendorAssistant"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="255"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="VENDOR_ASSISTANT"
    Expression="VENDOR_ASSISTANT"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="240"/>
    </DesignTime>
    <Properties>
      <SchemaBasedProperties>
        <LABEL_PLURAL
          ResId="od.tdmatch.model.InvoiceSummaryPOC1.VendorAssistant_LABEL_PLURAL"/>
        <LABEL
          ResId="od.tdmatch.model.InvoiceSummaryPOC1.VendorAssistant_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TotalInvCount"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="TOTAL_INV_COUNT"
    Expression="TOTAL_INV_COUNT"
    SQLType="NUMERIC">
    <Properties>
      <SchemaBasedProperties>
        <LABEL_PLURAL
          ResId="od.tdmatch.model.InvoiceSummaryPOC1.TotalInvCount_LABEL_PLURAL"/>
        <LABEL
          ResId="od.tdmatch.model.InvoiceSummaryPOC1.TotalInvCount_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TotalInvAmount"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="TOTAL_INV_AMOUNT"
    Expression="TOTAL_INV_AMOUNT"
    SQLType="NUMERIC">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="od.tdmatch.model.InvoiceSummaryPOC1.TotalInvAmount_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TotalMootCount"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="TOTAL_MOOT_COUNT"
    Expression="TOTAL_MOOT_COUNT"
    SQLType="NUMERIC">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="od.tdmatch.model.InvoiceSummaryPOC1.TotalMootCount_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TotalMootInvAmount"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="TOTAL_MOOT_INV_AMOUNT"
    Expression="TOTAL_MOOT_INV_AMOUNT"
    SQLType="NUMERIC">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="od.tdmatch.model.InvoiceSummaryPOC1.TotalMootInvAmount_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TotalMootLineAmount"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="TOTAL_MOOT_LINE_AMOUNT"
    Expression="TOTAL_MOOT_LINE_AMOUNT"
    SQLType="NUMERIC">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="od.tdmatch.model.InvoiceSummaryPOC1.TotalMootLineAmount_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TotalNrfCount"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="TOTAL_NRF_COUNT"
    Expression="TOTAL_NRF_COUNT"
    SQLType="NUMERIC">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="od.tdmatch.model.InvoiceSummaryPOC1.TotalNrfCount_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TotalNrfAmount"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="TOTAL_NRF_AMOUNT"
    Expression="TOTAL_NRF_AMOUNT"
    SQLType="NUMERIC">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="od.tdmatch.model.InvoiceSummaryPOC1.TotalNrfAmount_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="SidTotalInvCount"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="255"
    Type="oracle.jbo.domain.Number"
    ColumnType="VARCHAR2"
    AliasName="VIEW_ATTR"
    SQLType="VARCHAR"
    Expression="sum(TOTAL_INV_COUNT)">
    <Properties>
      <SchemaBasedProperties>
        <DISPLAYHINT
          Value="Hide"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <AttrArray Name="KeyAttributes">
    <Item Value="VendorAssistant"/>
  </AttrArray>
  <ResourceBundle>
    <PropertiesBundle
      PropertiesFile="od.tdmatch.model.ModelBundle"/>
  </ResourceBundle>
</ViewObject>
