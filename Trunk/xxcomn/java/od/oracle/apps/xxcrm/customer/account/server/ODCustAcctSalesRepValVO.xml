<?xml version="1.0" encoding='windows-1252'?>
<!DOCTYPE ViewObject SYSTEM "jbo_03_01.dtd">

<ViewObject
   Name="ODCustAcctSalesRepValVO"
   BindingStyle="Oracle"
   CustomQuery="true"
   RowClass="od.oracle.apps.xxcrm.customer.account.server.ODCustAcctSalesRepValVORowImpl"
   ComponentClass="od.oracle.apps.xxcrm.customer.account.server.ODCustAcctSalesRepValVOImpl"
   MsgBundleClass="oracle.jbo.common.JboResourceBundle"
   UseGlueCode="false" >
   <SQLQuery><![CDATA[
SELECT 
                  count(hps.party_site_id)
           FROM    hz_party_sites hps
                 ,( SELECT /*+ ordered */
                           terr.named_acct_terr_id  ,
                           terr_ent.entity_type     ,
                           terr_ent.entity_id       ,
                           terr_rsc.resource_id     ,
                           terr_rsc.resource_role_id,
                           terr_rsc.GROUP_ID        ,
                           terr_ent.full_access_flag
                    FROM    xx_tm_nam_terr_rsc_dtls     terr_rsc,
                           xx_tm_nam_terr_defn           terr        ,
                           xx_tm_nam_terr_entity_dtls  terr_ent
                    WHERE   terr.named_acct_terr_id       = terr_rsc.named_acct_terr_id
                      AND   terr_ent.named_acct_terr_id = terr_rsc.named_acct_terr_id
                      AND   terr_ent.named_acct_terr_id = terr.named_acct_terr_id
                      AND   SYSDATE BETWEEN NVL (terr.start_date_active, SYSDATE     - 1) AND NVL (terr.end_date_active, SYSDATE + 1)
                      AND   SYSDATE BETWEEN NVL (terr_ent.start_date_active, SYSDATE - 1) AND NVL (terr_ent.end_date_active, SYSDATE + 1)
                      AND   SYSDATE BETWEEN NVL (terr_rsc.start_date_active, SYSDATE - 1) AND NVL (terr_rsc.end_date_active, SYSDATE + 1)
                      AND   NVL (terr.status, 'A')     = 'A'
                      AND   NVL (terr_ent.status, 'A') = 'A'
                      AND   NVL (terr_rsc.status, 'A') = 'A')         terr,
                 (SELECT    mr.resource_id, 
                            mr.role_id,
                            mr.group_id,
                            jrrr.attribute15 legacy_rep_id
                     FROM   jtf_rs_group_mbr_role_vl mr,
                            jtf_rs_role_relations jrrr,
                            jtf_rs_role_details_vl JTR
                     WHERE    
                            jrrr.role_resource_id= mr.group_member_id
                        AND jrrr.role_id = jtr.role_id
                        AND JTR.attribute15 = 'BSD'
                        AND jrrr.attribute15 is not null) legrep
        WHERE hps.party_id = :1	
          AND terr.entity_type     ='PARTY_SITE'
          AND terr.entity_id =  hps.party_site_id
          AND legrep.resource_id = terr.resource_id
          AND legrep.group_id = terr.group_id
          AND legrep.role_id = terr.resource_role_id
   ]]></SQLQuery>
   <DesignTime>
      <Attr Name="_isCodegen" Value="true" />
      <Attr Name="_version" Value="9.0.3.13.93" />
      <Attr Name="_CodeGenFlagNew" Value="36" />
   </DesignTime>
   <ViewAttribute
      Name="Count1"
      IsPersistent="false"
      Type="oracle.jbo.domain.Number"
      ColumnType="NUMBER"
      Expression="COUNT(*)"
      SQLType="NUMERIC" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="22" />
      </DesignTime>
   </ViewAttribute>
</ViewObject>
