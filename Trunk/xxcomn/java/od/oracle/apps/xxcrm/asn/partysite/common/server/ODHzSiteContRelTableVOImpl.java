/*===========================================================================+
 |                       Office Depot - Project Simplify                     |
 |            Oracle NAIO/WIPRO/Office Depot/Consulting Organization         |
 +===========================================================================+
 |  FILENAME                                                                 |
 |             HzSiteContRelTableVOImpl.java                                 |
 |                                                                           |
 |  DESCRIPTION                                                              |
 |    Class to initial and execute the VO query to fetch the contacts        |
 |    related at the party site level.                                       |
 |                                                                           |
 |  NOTES                                                                    |
 |                                                                           |
 |                                                                           |
 |  DEPENDENCIES                                                             |
 |    This class file is called from SiteContactRelTableAMImpl.java          |
 |                                                                           |
 |  HISTORY                                                                  |
 |                                                                           |
 |   04/09/2007  Ashok Kumar   Created                                       |
 |   24-Dec-2007 Anirban Chaudhuri   Fixed code for defect#187 in ASN Tracker|
 +===========================================================================*/
package od.oracle.apps.xxcrm.asn.partysite.common.server;

import oracle.apps.asn.common.schema.server.ASNUtil;
import oracle.apps.fnd.common.MessageToken;
import oracle.apps.fnd.common.VersionInfo;
import oracle.apps.fnd.framework.server.OAViewObjectImpl;
import oracle.apps.fnd.framework.OAFwkConstants;
import oracle.jbo.domain.Number;
import oracle.apps.fnd.framework.server.OADBTransaction;

//  ---------------------------------------------------------------
//  ---    File generated by Oracle Business Components for Java.
//  ---------------------------------------------------------------

public class ODHzSiteContRelTableVOImpl extends OAViewObjectImpl 
{

 /**
  * Oracle Applications internal source control identifier.
  */
  public static final String RCS_ID="$Header: /home/cvs/repository/Office_Depot/SRC/CRM/E1307_SiteLevel_Attributes_ASN/3.\040Source\040Code\040&\040Install\040Files/E1307C_SiteLevel_Attributes_(SiteViewUpdates)/ODHzSiteContRelTableVOImpl.java,v 1.3 2007/10/01 11:53:58 akumar Exp $";

 /**
  * Oracle Applications internal source control identifier.
  */
  public static final boolean RCS_ID_RECORDED =
    VersionInfo.recordClassVersion(RCS_ID, "od.oracle.apps.xxcrm.asn.partysite.common.server");
  /**
   * 
   * This is the default constructor (do not remove)
   */
  public ODHzSiteContRelTableVOImpl()
  {
  }

  /**
  * Initializes and executes the query.
  *
  * @param partySiteId  Party Site identifier
  */
  public void initQuery(String partySiteId)
  {
    final String METHOD_NAME = "xxcrm.asn.partysite.common.server.ODHzSiteContRelTableVOImpl.initQuery";
    OADBTransaction dbTrx = (OADBTransaction)getDBTransaction();
    boolean isProcLogEnabled = dbTrx.isLoggingEnabled(OAFwkConstants.PROCEDURE);
    if (isProcLogEnabled)  {
      dbTrx.writeDiagnostics(METHOD_NAME, "Begin", OAFwkConstants.PROCEDURE);
      StringBuffer buf = new StringBuffer();
      buf.append("Input Parameters: partySiteId = ");
      buf.append(partySiteId);
      dbTrx.writeDiagnostics(METHOD_NAME,buf.toString(), OAFwkConstants.PROCEDURE);
    }

    Number siteId = null;

    setWhereClauseParams(null); // Always reset

    if ((partySiteId != null) && (!("".equals(partySiteId.trim()))))
    {
        MessageToken[] tokens = { new MessageToken("IDNAME", partySiteId) };
        siteId = ASNUtil.stringToJboNumber
                           (partySiteId, "ASN_CMMN_STR_TO_JBONUM_ERR", tokens);
        setWhereClauseParam(0, siteId);
    }
	//anirban added for defect#187 in ASN Tracker
	else
	{
	 siteId = new Number(-9999);
     setWhereClauseParam(0, siteId);
	}
	//anirban added for defect#187 in ASN Tracker
    setMaxFetchSize(-1);
    executeQuery();

  } // end initQuery()
 
}