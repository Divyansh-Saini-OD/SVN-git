<?xml version='1.0' encoding='US-ASCII' ?>
<!DOCTYPE ViewObject SYSTEM "jbo_03_01.dtd">

<!-- $Header: BankAccountsVO.xml 120.6.12010000.10 2013/02/07 08:58:21 melapaku ship $ -->
<!--
  Author: Sridevi Kondoju
  Component Id: E1356
  Script Location: $CUSTOM_JAVA_TOP/od/oracle/apps/xxfin/ar/irec/accountDetails/pay/server
  Description: retrofitted for r12 upgrade
  History:
  Name            Date         Version    Description
  Sridevi Kondoju 16-Aug-2013   1.0    Retrofitted for R12 Upgrade.
-->
<ViewObject
   Name="OD_BankAccountsVO"
    Extends="oracle.apps.ar.irec.accountDetails.pay.server.BankAccountsVO"
   OrderBy="ORDER_OF_PREFERENCE"
   BindingStyle="Oracle"
   CustomQuery="true"
   RowClass="od.oracle.apps.xxfin.ar.irec.accountDetails.pay.server.OD_BankAccountsVORowImpl"
   ComponentClass="od.oracle.apps.xxfin.ar.irec.accountDetails.pay.server.OD_BankAccountsVOImpl"
   MsgBundleClass="oracle.jbo.common.JboResourceBundle"
   UseGlueCode="false" >
   <SQLQuery><![CDATA[
select
 ACCOUNT_NUMBER BANK_ACCOUNT_NUM_MASKED,
 CE.BANK_ACCOUNT_NAME account_holder,
 iby.INSTRUMENT_ID bank_account_id,
 iby.ACCOUNT_NUMBER account_number,
 decode(rownum,1,'Y',null) selected_account,
 iby.BRANCH_NUMBER bank_num,
 iby.BANK_NUMBER bank_number,
 iby.BANK_NAME bank_name,
 iby.BRANCH_NAME bank_branch_name,
 ce.IBAN_NUMBER,
 ce.BANK_ACCOUNT_TYPE account_type,
 iby.BIC_NUMBER,
 iby.assignment_start_date START_DATE,
 iby.assignment_end_date END_DATE, 
'N' detailView,
iby.INSTR_ASSIGNMENT_ID,
iby.ORDER_OF_PREFERENCE,
iby.CURRENCY_CODE,
nvl(iby.CARD_SINGLE_USE_FLAG,'N') CARD_SINGLE_USE_FLAG,
iby.BRANCH_NUMBER bank_branch_number,
ce.object_version_number,
ce.BANK_PARTY_ID,
ce.BRANCH_PARTY_ID,
ipiua.attribute2 Custom_Account_Holder_Name, /*AP_BANK_ACCOUNT_USES_ALL.attribute2 replaced with IBY_PMT_INSTR_USES_ALL.attribute2 */
ipiua.attribute3 Custom_Account_Type,       /*AP_BANK_ACCOUNT_USES_ALL.attribute3 replaced with IBY_PMT_INSTR_USES_ALL.attribute3 */
ipiua.attribute4 Custom_EmailAddress
from IBY_FNDCPT_PAYER_ASSGN_INSTR_V iby, IBY_EXT_BANK_ACCOUNTS_V ce,
     IBY_PMT_INSTR_USES_ALL ipiua  /*Added for R12 upgrade retrofit - OD_BankAccountsVO */
WHERE iby.CUST_ACCOUNT_ID = :1
AND ( (iby.ACCT_SITE_USE_ID = :2 AND ORG_TYPE = 'OPERATING_UNIT' AND ORG_ID = :3)
        OR  iby.ACCT_SITE_USE_ID IS NULL  )
AND iby.INSTRUMENT_TYPE = 'BANKACCOUNT' AND
iby.INSTRUMENT_ID = ce.ext_bank_account_id
AND NVL(CARD_SINGLE_USE_FLAG, 'N') = 'N'
AND NVL(CARD_INFO_ONLY_FLAG, 'N') = 'N'
AND ACCOUNT_NUMBER IS NOT NULL
AND nvl(TRUNC(ce.start_date),   sysdate - 1) <= TRUNC(sysdate)  
AND nvl(TRUNC(iby.assignment_start_date),   sysdate  - 1) <= TRUNC(sysdate) 
AND nvl(TRUNC(ce.end_date),   sysdate + 10) > TRUNC(sysdate)
AND nvl(TRUNC(iby.assignment_end_date),   sysdate + 10) > TRUNC(sysdate)
AND ipiua.INSTRUMENT_PAYMENT_USE_ID=iby.INSTR_ASSIGNMENT_ID
AND ipiua.attribute1='ACH'
   ]]></SQLQuery>
   <DesignTime>
      <Attr Name="_isCodegen" Value="true" />
      <Attr Name="_version" Value="10.1.3.33.75 + 4640288" />
      <Attr Name="_CodeGenFlagNew" Value="36" />
   </DesignTime>
    <ViewAttribute
      Name="CustomAccountHolderName"
      IsUpdateable="false"
      IsPersistent="false"
      Precision="150"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="CUSTOMACCOUNTHOLDERNAME"
      Expression="CustomAccountHolderName"
      SQLType="VARCHAR" >
   </ViewAttribute>
   <ViewAttribute
      Name="CustomAccountType"
      IsPersistent="false"
      Precision="150"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="CUSTOM_ACCOUNT_TYPE"
      Expression="CUSTOM_ACCOUNT_TYPE"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="150" />
      </DesignTime>
   </ViewAttribute>
   <ViewAttribute
      Name="CustomEmailAddress"
      IsPersistent="false"
      Precision="150"
      Type="java.lang.String"
      ColumnType="VARCHAR2"
      AliasName="CUSTOM_EMAILADDRESS"
      Expression="CUSTOM_EMAILADDRESS"
      SQLType="VARCHAR" >
      <DesignTime>
         <Attr Name="_DisplaySize" Value="150" />
      </DesignTime>
   </ViewAttribute>
</ViewObject>
